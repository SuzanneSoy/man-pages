
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of MBTOWC</TITLE>
</HEAD><BODY>
<H1>MBTOWC</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 2019-03-06<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

mbtowc - convert a multibyte sequence to a wide character
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:///usr/include/stdlib.h">stdlib.h</A>&gt;</B>

<B>int mbtowc(wchar_t *</B><I>pwc</I><B>, const char *</B><I>s</I><B>, size_t </B><I>n</I><B>);</B>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

The main case for this function is when
<I>s</I>

is not NULL and
<I>pwc</I>

is
not NULL.
In this case, the
<B>mbtowc</B>()

function inspects at most
<I>n</I>

bytes of the multibyte string starting at
<I>s</I>,

extracts the next complete
multibyte character, converts it to a wide character and stores it at
<I>*pwc</I>.

It updates an internal shift state known only to the
<B>mbtowc</B>()

function.
If
<I>s</I>

does not point to a null byte ('\0'), it returns the number
of bytes that were consumed from
<I>s</I>,

otherwise it returns 0.
<P>

If the
<I>n</I>

bytes starting at
<I>s</I>

do not contain a complete multibyte
character, or if they contain an invalid multibyte sequence,
<B>mbtowc</B>()

returns -1.
This can happen even if
<I>n</I>

&gt;=
<I>MB_CUR_MAX</I>,

if the multibyte string contains redundant shift sequences.
<P>

A different case is when
<I>s</I>

is not NULL but
<I>pwc</I>

is NULL.
In this case, the
<B>mbtowc</B>()

function behaves as above, except that it does not
store the converted wide character in memory.
<P>

A third case is when
<I>s</I>

is NULL.
In this case,
<I>pwc</I>

and
<I>n</I>

are
ignored.
The
<B>mbtowc</B>()

function


resets the shift state, only known to this function,
to the initial state, and
returns nonzero if the encoding has nontrivial shift state, or zero if the
encoding is stateless.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

If
<I>s</I>

is not NULL, the
<B>mbtowc</B>()

function returns the number of
consumed bytes starting at
<I>s</I>,

or 0 if
<I>s</I>

points to a null byte,
or -1 upon failure.
<P>

If
<I>s</I>

is NULL, the
<B>mbtowc</B>()

function
returns nonzero if the encoding
has nontrivial shift state, or zero if the encoding is stateless.
<A NAME="lbAF">&nbsp;</A>
<H2>ATTRIBUTES</H2>

For an explanation of the terms used in this section, see
<B><A HREF="/cgi-bin/man/man2html?7+attributes">attributes</A></B>(7).

<TABLE BORDER>
<TR VALIGN=top><TD><B>Interface</B></TD><TD><B>Attribute</B></TD><TD><B>Value</B><BR></TD></TR>
<TR VALIGN=top><TD>
<B>mbtowc</B>()

</TD><TD>Thread safety</TD><TD>MT-Unsafe race<BR></TD></TR>
</TABLE>

<A NAME="lbAG">&nbsp;</A>
<H2>CONFORMING TO</H2>

POSIX.1-2001, POSIX.1-2008, C99.
<A NAME="lbAH">&nbsp;</A>
<H2>NOTES</H2>

The behavior of
<B>mbtowc</B>()

depends on the
<B>LC_CTYPE</B>

category of the
current locale.
<P>

This function is not multithread safe.
The function
<B><A HREF="/cgi-bin/man/man2html?3+mbrtowc">mbrtowc</A></B>(3)

provides
a better interface to the same functionality.
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/cgi-bin/man/man2html?3+MB_CUR_MAX">MB_CUR_MAX</A></B>(3),

<B><A HREF="/cgi-bin/man/man2html?3+mblen">mblen</A></B>(3),

<B><A HREF="/cgi-bin/man/man2html?3+mbrtowc">mbrtowc</A></B>(3),

<B><A HREF="/cgi-bin/man/man2html?3+mbstowcs">mbstowcs</A></B>(3),

<B><A HREF="/cgi-bin/man/man2html?3+wcstombs">wcstombs</A></B>(3),

<B><A HREF="/cgi-bin/man/man2html?3+wctomb">wctomb</A></B>(3)

<A NAME="lbAJ">&nbsp;</A>
<H2>COLOPHON</H2>

This page is part of release 5.05 of the Linux
<I>man-pages</I>

project.
A description of the project,
information about reporting bugs,
and the latest version of this page,
can be found at
<A HREF="https://www.kernel.org/doc/man-pages/.">https://www.kernel.org/doc/man-pages/.</A>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="1"><A HREF="#lbAB">NAME</A><DD>
<DT id="2"><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT id="3"><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT id="4"><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT id="5"><A HREF="#lbAF">ATTRIBUTES</A><DD>
<DT id="6"><A HREF="#lbAG">CONFORMING TO</A><DD>
<DT id="7"><A HREF="#lbAH">NOTES</A><DD>
<DT id="8"><A HREF="#lbAI">SEE ALSO</A><DD>
<DT id="9"><A HREF="#lbAJ">COLOPHON</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:05:48 GMT, March 31, 2021
</BODY>
</HTML>

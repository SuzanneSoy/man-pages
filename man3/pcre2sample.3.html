
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of PCRE2SAMPLE</TITLE>
</HEAD><BODY>
<H1>PCRE2SAMPLE</H1>
Section: C Library Functions (3)<BR>Updated: 02 February 2016<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

PCRE2 - Perl-compatible regular expressions (revised API)
<A NAME="lbAC">&nbsp;</A>
<H2>PCRE2 SAMPLE PROGRAM</H2>


<P>
A simple, complete demonstration program to get you started with using PCRE2 is
supplied in the file <I>pcre2demo.c</I> in the <B>src</B> directory in the PCRE2
distribution. A listing of this program is given in the

<B>pcre2demo</B>

documentation. If you do not have a copy of the PCRE2 distribution, you can
save this listing to re-create the contents of <I>pcre2demo.c</I>.
<P>

The demonstration program compiles the regular expression that is its
first argument, and matches it against the subject string in its second
argument. No PCRE2 options are set, and default character tables are used. If
matching succeeds, the program outputs the portion of the subject that matched,
together with the contents of any captured substrings.
<P>

If the -g option is given on the command line, the program then goes on to
check for further matches of the same regular expression in the same subject
string. The logic is a little bit tricky because of the possibility of matching
an empty string. Comments in the code explain what is going on.
<P>

The code in <B>pcre2demo.c</B> is an 8-bit program that uses the PCRE2 8-bit
library. It handles strings and characters that are stored in 8-bit code units.
By default, one character corresponds to one code unit, but if the pattern
starts with &quot;(*UTF)&quot;, both it and the subject are treated as UTF-8 strings,
where characters may occupy multiple code units.
<P>

If PCRE2 is installed in the standard include and library directories for your
operating system, you should be able to compile the demonstration program using
a command like this:
<P>
<BR>&nbsp;&nbsp;cc&nbsp;-o&nbsp;pcre2demo&nbsp;pcre2demo.c&nbsp;-lpcre2-8
<P>
If PCRE2 is installed elsewhere, you may need to add additional options to the
command line. For example, on a Unix-like system that has PCRE2 installed in
<I>/usr/local</I>, you can compile the demonstration program using a command
like this:
<P>

<BR>&nbsp;&nbsp;cc&nbsp;-o&nbsp;pcre2demo&nbsp;-I/usr/local/include&nbsp;pcre2demo.c&nbsp;\
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-L/usr/local/lib&nbsp;-lpcre2-8
<P>
Once you have built the demonstration program, you can run simple tests like
this:
<P>
<BR>&nbsp;&nbsp;./pcre2demo&nbsp;'cat|dog'&nbsp;'the&nbsp;cat&nbsp;sat&nbsp;on&nbsp;the&nbsp;mat'
<BR>&nbsp;&nbsp;./pcre2demo&nbsp;-g&nbsp;'cat|dog'&nbsp;'the&nbsp;dog&nbsp;sat&nbsp;on&nbsp;the&nbsp;cat'
<P>
Note that there is a much more comprehensive test program, called

<B>pcre2test</B>,

which supports many more facilities for testing regular expressions using all
three PCRE2 libraries (8-bit, 16-bit, and 32-bit, though not all three need be
installed). The

<B>pcre2demo</B>

program is provided as a relatively simple coding example.
<P>

If you try to run

<B>pcre2demo</B>

when PCRE2 is not installed in the standard library directory, you may get an
error like this on some operating systems (e.g. Solaris):
<P>
<BR>&nbsp;&nbsp;ld.so.1:&nbsp;pcre2demo:&nbsp;fatal:&nbsp;libpcre2-8.so.0:&nbsp;open&nbsp;failed:&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory
<P>
This is caused by the way shared library support works on those systems. You
need to add
<P>
<BR>&nbsp;&nbsp;-R/usr/local/lib
<P>
(for example) to the compile command to get round this problem.
<A NAME="lbAD">&nbsp;</A>
<H2>AUTHOR</H2>


<P>
<PRE>
Philip Hazel
University Computing Service
Cambridge, England.
</PRE>

<A NAME="lbAE">&nbsp;</A>
<H2>REVISION</H2>


<P>
<PRE>
Last updated: 02 February 2016
Copyright (c) 1997-2016 University of Cambridge.
</PRE>

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="1"><A HREF="#lbAB">NAME</A><DD>
<DT id="2"><A HREF="#lbAC">PCRE2 SAMPLE PROGRAM</A><DD>
<DT id="3"><A HREF="#lbAD">AUTHOR</A><DD>
<DT id="4"><A HREF="#lbAE">REVISION</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:05:50 GMT, March 31, 2021
</BODY>
</HTML>

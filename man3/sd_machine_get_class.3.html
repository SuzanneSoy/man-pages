
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of SD_MACHINE_GET_CLASS</TITLE>
</HEAD><BODY>
<H1>SD_MACHINE_GET_CLASS</H1>
Section: sd_machine_get_class (3)<BR>Updated: <BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>





















<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

sd_machine_get_class, sd_machine_get_ifindices - Determine the class and network interface indices of a locally running virtual machine or container.
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<P>
<B>
</B><PRE>
#include &lt;<A HREF="file:///usr/include/systemd/sd-login.h">systemd/sd-login.h</A>&gt;
</PRE>


<DL COMPACT>
<DT id="1">
<B>int sd_machine_get_class(const&nbsp;char*&nbsp;</B><I>machine</I><B>, char&nbsp;**</B><I>class</I><B>);</B>

<DT id="2">
<B>int sd_machine_get_ifindices(const&nbsp;char*&nbsp;</B><I>machine</I><B>, int&nbsp;**</B><I>ifindices</I><B>);</B>

</DL>
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<P>

<B>sd_machine_get_class()</B>
<DD>may be used to determine the class of a locally running virtual machine or container that is registered with
<B><A HREF="/cgi-bin/man/man2html?8+systemd-machined.service">systemd-machined.service</A></B>(8). The string returned is either
&quot;vm&quot;
or
&quot;container&quot;. The returned string needs to be freed with the libc
<B><A HREF="/cgi-bin/man/man2html?3+free">free</A></B>(3)
call after use.
<P>

<B>sd_machine_get_ifindices()</B>
may be used to determine the numeric indices of the network interfaces on the host that are pointing towards the specified locally running virtual machine or container that is registered with
<B><A HREF="/cgi-bin/man/man2html?8+systemd-machined.service">systemd-machined.service</A></B>(8). The returned array needs to be freed with the libc
<B><A HREF="/cgi-bin/man/man2html?3+free">free</A></B>(3)
call after use.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

<P>

On success, these calls return 0 or a positive integer. On failure, these calls return a negative errno-style error code.
<A NAME="lbAF">&nbsp;</A>
<H3>Errors</H3>

<P>

Returned errors may indicate the following problems:
<P>

<B>-ENXIO</B>
<DL COMPACT><DT id="3"><DD>
The specified machine does not exist or is currently not running.
</DL>

<P>

<B>-EINVAL</B>
<DL COMPACT><DT id="4"><DD>
An input parameter was invalid (out of range, or
<B>NULL</B>, where that is not accepted).
</DL>

<P>

<B>-ENOMEM</B>
<DL COMPACT><DT id="5"><DD>
Memory allocation failed.
</DL>

<A NAME="lbAG">&nbsp;</A>
<H2>NOTES</H2>

<P>

These APIs are implemented as a shared library, which can be compiled and linked to with the
<B>libsystemd</B>&nbsp;<B><A HREF="/cgi-bin/man/man2html?1+pkg-config">pkg-config</A></B>(1)
file.
<A NAME="lbAH">&nbsp;</A>
<H2>SEE ALSO</H2>

<P>

<B><A HREF="/cgi-bin/man/man2html?1+systemd">systemd</A></B>(1),
<B><A HREF="/cgi-bin/man/man2html?3+sd-login">sd-login</A></B>(3),
<B><A HREF="/cgi-bin/man/man2html?8+systemd-machined.service">systemd-machined.service</A></B>(8),
<B><A HREF="/cgi-bin/man/man2html?3+sd_pid_get_machine_name">sd_pid_get_machine_name</A></B>(3)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="6"><A HREF="#lbAB">NAME</A><DD>
<DT id="7"><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT id="8"><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT id="9"><A HREF="#lbAE">RETURN VALUE</A><DD>
<DL>
<DT id="10"><A HREF="#lbAF">Errors</A><DD>
</DL>
<DT id="11"><A HREF="#lbAG">NOTES</A><DD>
<DT id="12"><A HREF="#lbAH">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:05:55 GMT, March 31, 2021
</BODY>
</HTML>

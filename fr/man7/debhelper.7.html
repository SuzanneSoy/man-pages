
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of debhelper</TITLE>
</HEAD><BODY>
<H1>debhelper</H1>
Section: Debhelper (7)<BR>Updated: 2020-03-27<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NOM</H2>



debhelper - Ensemble d'outils regroupés sous le nom de debhelper
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>



<B>dh_</B><I>*</I> [<B>-v</B>] [<B>-a</B>] [<B>-i</B>] [<B>--no-act</B>] [<B>-p</B><I>paquet</I>]
[<B>-N</B><I>paquet</I>] [<B>-P</B><I>tmpdir</I>]
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>



Debhelper facilite la construction des paquets Debian. La philosophie qui
sous-tend debhelper est de fournir une collection de petits outils simples
et facilement compréhensibles qui seront exploités dans <I>debian/rules</I> pour
automatiser les tâches courantes liées à la construction des paquets, d'où
un travail allégé pour le responsable. Dans une certaine mesure, cela
signifie également que ces outils peuvent être adaptés aux modifications
éventuelles de la Charte Debian. Les paquets qui utiliseront debhelper ne
nécessiteront qu'une simple reconstruction pour être conformes aux nouvelles
règles.
<P>

Un fichier <I>debian/rules</I> typique, exploitant debhelper, appellera
séquentiellement plusieurs des commandes de debhelper ou bien utilisera
<B><A HREF="/cgi-bin/man/man2html?1+dh">dh</A></B>(1) pour automatiser ce processus. Des exemples de fichiers
debian/rules qui exploitent debhelper se trouvent dans
<I>/usr/share/doc/debhelper/examples/</I>
<P>

Pour créer un nouveau paquet Debian en utilisant debhelper, il suffit de
copier un des fichiers d'exemple et de le modifier manuellement. Il est
possible également d'essayer le paquet <B>dh-make</B> qui contient une commande
dh_make automatisant partiellement le processus. Pour se
familiariser avec ces concepts, le paquet Debian <B>maint-guide</B> contient un
cours sur la construction d'un premier paquet avec debhelper.
<P>

Sauf lorsque l'outil explicite le contraire, tous les outils debhelper sont
prévus pour être exécutés dans le répertoire racine d'un paquet source
désarchivé. Cela leur permet de trouver les fichiers <I>debian/control</I>.
<A NAME="lbAE">&nbsp;</A>
<H2>COMMANDES DE DEBHELPER</H2>



Voici la liste des commandes debhelper disponibles. Consulter leurs pages de
manuel respectives pour obtenir des informations complémentaires.
<DL COMPACT>
<DT id="1"><B><A HREF="/cgi-bin/man/man2html?1+dh_auto_build">dh_auto_build</A></B>(1)<DD>


Construire automatiquement un paquet
<DT id="2"><B><A HREF="/cgi-bin/man/man2html?1+dh_auto_clean">dh_auto_clean</A></B>(1)<DD>


Faire le ménage automatiquement après une construction de
paquet
<DT id="3"><B><A HREF="/cgi-bin/man/man2html?1+dh_auto_configure">dh_auto_configure</A></B>(1)<DD>


Configurer automatiquement un paquet préalablement à sa
construction
<DT id="4"><B><A HREF="/cgi-bin/man/man2html?1+dh_auto_install">dh_auto_install</A></B>(1)<DD>


Lancer automatiquement make install ou équivalent
<DT id="5"><B><A HREF="/cgi-bin/man/man2html?1+dh_auto_test">dh_auto_test</A></B>(1)<DD>


Exécuter automatiquement le jeu d'essai d'un paquet
<DT id="6"><B><A HREF="/cgi-bin/man/man2html?1+dh_bugfiles">dh_bugfiles</A></B>(1)<DD>


Installer les fichiers de personnalisation de rapports de
bogue dans les répertoires des paquets construits
<DT id="7"><B><A HREF="/cgi-bin/man/man2html?1+dh_builddeb">dh_builddeb</A></B>(1)<DD>


Construire des paquets binaires Debian
<DT id="8"><B><A HREF="/cgi-bin/man/man2html?1+dh_clean">dh_clean</A></B>(1)<DD>


Nettoyer les répertoires de construction du paquet
<DT id="9"><B><A HREF="/cgi-bin/man/man2html?1+dh_compress">dh_compress</A></B>(1)<DD>


Compresser les fichiers dans le répertoire de construction du
paquet et modifier les liens symboliques en conséquence
<DT id="10"><B><A HREF="/cgi-bin/man/man2html?1+dh_dwz">dh_dwz</A></B>(1)<DD>


Optimiser l'information de débogage <FONT SIZE="-1">DWARF</FONT> dans les binaires <FONT SIZE="-1">ELF</FONT>
grâce à dwz
<DT id="11"><B><A HREF="/cgi-bin/man/man2html?1+dh_fixperms">dh_fixperms</A></B>(1)<DD>


Ajuster les droits sur les fichiers du répertoire de
construction du paquet
<DT id="12"><B><A HREF="/cgi-bin/man/man2html?1+dh_gencontrol">dh_gencontrol</A></B>(1)<DD>


Produire et installer le fichier de contrôle
<DT id="13"><B><A HREF="/cgi-bin/man/man2html?1+dh_icons">dh_icons</A></B>(1)<DD>


Mettre à jour les caches des icônes Freedesktop
<DT id="14"><B><A HREF="/cgi-bin/man/man2html?1+dh_install">dh_install</A></B>(1)<DD>


Installer les fichiers dans le répertoire de construction du
paquet
<DT id="15"><B><A HREF="/cgi-bin/man/man2html?1+dh_installcatalogs">dh_installcatalogs</A></B>(1)<DD>


Installer et inscrire les catalogues <FONT SIZE="-1">SGML</FONT>
<DT id="16"><B><A HREF="/cgi-bin/man/man2html?1+dh_installchangelogs">dh_installchangelogs</A></B>(1)<DD>


Installer les journaux de suivi des modifications
(changelog) dans les répertoires de construction du paquet
<DT id="17"><B><A HREF="/cgi-bin/man/man2html?1+dh_installcron">dh_installcron</A></B>(1)<DD>


Installer les scripts cron dans etc/cron.*
<DT id="18"><B><A HREF="/cgi-bin/man/man2html?1+dh_installdebconf">dh_installdebconf</A></B>(1)<DD>


Installer les fichiers utilisés par debconf dans les
répertoires de construction du paquet
<DT id="19"><B><A HREF="/cgi-bin/man/man2html?1+dh_installdirs">dh_installdirs</A></B>(1)<DD>


Créer des sous-répertoires dans le répertoire de
construction du paquet
<DT id="20"><B><A HREF="/cgi-bin/man/man2html?1+dh_installdocs">dh_installdocs</A></B>(1)<DD>


Installer la documentation dans le répertoire de
construction du paquet
<DT id="21"><B><A HREF="/cgi-bin/man/man2html?1+dh_installemacsen">dh_installemacsen</A></B>(1)<DD>


Inscrire un paquet additionnel Emacs
<DT id="22"><B><A HREF="/cgi-bin/man/man2html?1+dh_installexamples">dh_installexamples</A></B>(1)<DD>


Installer les fichiers d'exemples dans le répertoire de
construction du paquet
<DT id="23"><B><A HREF="/cgi-bin/man/man2html?1+dh_installifupdown">dh_installifupdown</A></B>(1)<DD>


Installer les accroches (hooks) if-up et if-down
<DT id="24"><B><A HREF="/cgi-bin/man/man2html?1+dh_installinfo">dh_installinfo</A></B>(1)<DD>


Installer les fichiers info
<DT id="25"><B><A HREF="/cgi-bin/man/man2html?1+dh_installinit">dh_installinit</A></B>(1)<DD>


Installer les fichiers de service « init » dans le
répertoire de construction du paquet
<DT id="26"><B><A HREF="/cgi-bin/man/man2html?1+dh_installinitramfs">dh_installinitramfs</A></B>(1)<DD>


Installer les accroches (hooks) pour initramfs et
configurer les scripts de maintenance
<DT id="27"><B><A HREF="/cgi-bin/man/man2html?1+dh_installlogcheck">dh_installlogcheck</A></B>(1)<DD>


Installer les fichiers de règles de vérification des
journaux (logcheck rulefiles) dans etc/logcheck/
<DT id="28"><B><A HREF="/cgi-bin/man/man2html?1+dh_installlogrotate">dh_installlogrotate</A></B>(1)<DD>


Installer les fichiers de configuration de la rotation
des journaux (logrotate)
<DT id="29"><B><A HREF="/cgi-bin/man/man2html?1+dh_installman">dh_installman</A></B>(1)<DD>


Installer les pages de manuel dans le répertoire de
construction du paquet
<DT id="30"><B><A HREF="/cgi-bin/man/man2html?1+dh_installmenu">dh_installmenu</A></B>(1)<DD>


Installer les fichiers du menu Debian dans le répertoire de
construction du paquet
<DT id="31"><B><A HREF="/cgi-bin/man/man2html?1+dh_installmime">dh_installmime</A></B>(1)<DD>


Installer les fichiers « mime » dans le répertoire de
construction du paquet
<DT id="32"><B><A HREF="/cgi-bin/man/man2html?1+dh_installmodules">dh_installmodules</A></B>(1)<DD>


Inscrire les modules du noyau
<DT id="33"><B><A HREF="/cgi-bin/man/man2html?1+dh_installpam">dh_installpam</A></B>(1)<DD>


Installer les fichiers de support de <FONT SIZE="-1">PAM</FONT>
<DT id="34"><B><A HREF="/cgi-bin/man/man2html?1+dh_installppp">dh_installppp</A></B>(1)<DD>


Installer les fichiers ppp.ip-up et ppp.ip-down
<DT id="35"><B><A HREF="/cgi-bin/man/man2html?1+dh_installudev">dh_installudev</A></B>(1)<DD>


Installer les fichiers de règles udev
<DT id="36"><B><A HREF="/cgi-bin/man/man2html?1+dh_installwm">dh_installwm</A></B>(1)<DD>


Inscrire un gestionnaire de fenêtres (window manager)
<DT id="37"><B><A HREF="/cgi-bin/man/man2html?1+dh_installxfonts">dh_installxfonts</A></B>(1)<DD>


Inscrire les polices de caractères graphiques (X fonts)
<DT id="38"><B><A HREF="/cgi-bin/man/man2html?1+dh_link">dh_link</A></B>(1)<DD>


Créer les liens symboliques dans le répertoire de construction du
paquet
<DT id="39"><B><A HREF="/cgi-bin/man/man2html?1+dh_lintian">dh_lintian</A></B>(1)<DD>


Installer les fichiers « override » de lintian dans le
répertoire de construction du paquet
<DT id="40"><B><A HREF="/cgi-bin/man/man2html?1+dh_listpackages">dh_listpackages</A></B>(1)<DD>


Énumérer les paquets binaires que debhelper va traiter
<DT id="41"><B><A HREF="/cgi-bin/man/man2html?1+dh_makeshlibs">dh_makeshlibs</A></B>(1)<DD>


Créer automatiquement le fichier shlibs et exécuter
dpkg-gensymbols
<DT id="42"><B><A HREF="/cgi-bin/man/man2html?1+dh_md5sums">dh_md5sums</A></B>(1)<DD>


Créer le fichier DEBIAN/md5sums
<DT id="43"><B><A HREF="/cgi-bin/man/man2html?1+dh_movefiles">dh_movefiles</A></B>(1)<DD>


Déplacer des fichiers depuis debian/tmp dans des sous-paquets
<DT id="44"><B><A HREF="/cgi-bin/man/man2html?1+dh_perl">dh_perl</A></B>(1)<DD>


Déterminer les dépendances Perl et fait le ménage après MakeMaker
<DT id="45"><B><A HREF="/cgi-bin/man/man2html?1+dh_prep">dh_prep</A></B>(1)<DD>


Faire le ménage en vue de construire un paquet Debian
<DT id="46"><B><A HREF="/cgi-bin/man/man2html?1+dh_shlibdeps">dh_shlibdeps</A></B>(1)<DD>


Déterminer les dépendances envers les bibliothèques partagées
<DT id="47"><B><A HREF="/cgi-bin/man/man2html?1+dh_strip">dh_strip</A></B>(1)<DD>


Dépouiller les exécutables, les bibliothèques partagées et
certaines bibliothèques statiques
<DT id="48"><B><A HREF="/cgi-bin/man/man2html?1+dh_systemd_enable">dh_systemd_enable</A></B>(1)<DD>


Activer ou désactiver les fichiers unit de systemd
<DT id="49"><B><A HREF="/cgi-bin/man/man2html?1+dh_systemd_start">dh_systemd_start</A></B>(1)<DD>


Démarrer/arrêter/redémarrer des fichiers unit de systemd
<DT id="50"><B><A HREF="/cgi-bin/man/man2html?1+dh_testdir">dh_testdir</A></B>(1)<DD>


Vérifier le répertoire avant de construire un paquet Debian
<DT id="51"><B><A HREF="/cgi-bin/man/man2html?1+dh_testroot">dh_testroot</A></B>(1)<DD>


Vérifier que le paquet est construit avec les droits
nécessaires du superutilisateur (root)
<DT id="52"><B><A HREF="/cgi-bin/man/man2html?1+dh_usrlocal">dh_usrlocal</A></B>(1)<DD>


Migrer les répertoires usr/local dans les scripts de
maintenance du paquet
</DL>
<A NAME="lbAF">&nbsp;</A>
<H3>Commandes obsolètes</H3>



Quelques commandes debhelper sont obsolètes et ne devraient plus être
utilisées.
<DL COMPACT>
<DT id="53"><B><A HREF="/cgi-bin/man/man2html?1+dh_gconf">dh_gconf</A></B>(1)<DD>


Installer les fichiers par défaut de GConf et inscrire les
schémas (obsolète)
<DT id="54"><B><A HREF="/cgi-bin/man/man2html?1+dh_installmanpages">dh_installmanpages</A></B>(1)<DD>


Ancien programme d'installation des pages de manuel
(obsolète)
</DL>
<A NAME="lbAG">&nbsp;</A>
<H3>Autres commandes</H3>



Si le nom d'un programme commence par <B>dh_</B> et qu'il n'est pas dans les
listes ci-dessus, cela signifie qu'il ne fait pas partie de la suite
debhelper. Cependant, il devrait tout de même fonctionner comme les autres
programmes décrits dans cette page.
<A NAME="lbAH">&nbsp;</A>
<H2>FICHIERS DE CONFIGURATION DE DEBHELPER</H2>



Beaucoup de commandes de debhelper utilisent des fichiers du répertoire
<I>debian/</I> pour piloter leur fonctionnement. Outre les fichiers
<I>debian/changelog</I> et <I>debian/control</I>, qui se trouvent dans tous les
paquets, et pas seulement dans ceux qui emploient debhelper, d'autres
fichiers peuvent servir à configurer le comportement des commandes
spécifiques de debhelper. Ces fichiers sont, en principe, nommés
debian/<I>paquet</I>.toto (où <I>paquet</I> est, bien sûr, à remplacer par le nom du
paquet concerné).
<P>

Par exemple, <B>dh_installdocs</B> utilise un fichier appelé
<I>debian/package.docs</I> pour énumérer les fichiers de documentation qu'il
installera. Consulter les pages de manuel des différentes commandes pour
connaître le détail des noms et des formats des fichiers employés. D'une
façon générale, ces fichiers de configuration énumèrent les fichiers sur
lesquels devra porter l'action, à raison d'un fichier par ligne. Quelques
programmes de debhelper emploient des paires fichier/destination voire des
formats légèrement plus compliqués.
<P>

Veuillez noter que pour le premier (ou unique) paquet binaire listé dans
<I>debian/control</I>, debhelper utilisera <I>debian/toto</I> lorsqu'il n'y a aucun
fichier <I>debian/paquet.toto</I>. Cependant, c'est une bonne idée de garder
le préfixe <I>paquet.</I> car c'est plus explicite. Les principales
exceptions sont les fichiers que debhelper installe par défaut dans chaque
paquet binaire lorsqu'il ne trouve pas de préfixe (comme <I>debian/copyright</I>
ou <I>debian/changelog</I>).
<P>

Dans quelques rares cas, il peut être utile d'exploiter différentes versions
de ces fichiers pour des architectures ou des systèmes d'exploitation
différents. S'il existe des fichiers appelés debian/<I>paquet</I>.toto.<I></I><FONT SIZE="-1"><I>ARCH</I></FONT><I></I>
ou debian/<I>paquet</I>.toto.<I></I><FONT SIZE="-1"><I>OS</I></FONT><I></I>, dans lesquels <I></I><FONT SIZE="-1"><I>ARCH</I></FONT><I></I> et <I></I><FONT SIZE="-1"><I>OS</I></FONT><I></I> correspondent
respectivement au résultat de « <B>dpkg-architecture -qDEB_HOST_ARCH</B> » ou de
« <B>dpkg-architecture -qDEB_HOST_ARCH_OS</B> », alors ils seront utilisés de
préférence aux autres fichiers plus généraux.
<P>

En général, ces fichiers de configuration sont employés pour indiquer des
listes de divers types de fichiers : documentation, fichiers d'exemple à
installer, fichiers à déplacer et ainsi de suite. Lorsque cela se justifie,
dans des cas comme ceux-ci, il est possible d'employer, dans ces fichiers,
les jokers (wildcard) standards de l'interpréteur de commandes (shell) (<B>?</B>
et <B>*</B> et <B>[</B><I>..</I><B>]</B>). Des commentaires peuvent être ajoutés dans ces
fichiers : les lignes commençant par <B>#</B> sont ignorées.
<P>

La syntaxe de ces fichiers est volontairement simple, pour les rendre
faciles à lire, à comprendre et à modifier.
<A NAME="lbAI">&nbsp;</A>
<H3>Substitutions in debhelper config files</H3>



In compatibility level 13 and later, it is possible to use simple
substitutions in <I>some</I> debhelper config files (particularly, the
configuration files for <B><A HREF="/cgi-bin/man/man2html?1+dh_install">dh_install</A></B>(1)).
<P>

All substitution variables are of the form <I>${foo}</I> and the braces are
mandatory.  Variable names are case-sensitive and consist of alphanumerics
(a-zA-Z0-9), hyphens (-), underscores (_), and colons (:).  The first
character must be an alphanumeric.
<P>

If you need a literal dollar sign that cannot trigger a substitution, you
can either use the <B>${Dollar}</B> substitution or the sequence <B>${}</B>.
<P>

The following expansions are available:
<DL COMPACT>
<DT id="55"><B>DEB_HOST_*</B>, <B>DEB_BUILD_*</B>, <B>DEB_TARGET_*</B><DD>


Expands to the relevant <B><A HREF="/cgi-bin/man/man2html?1+dpkg-architecture">dpkg-architecture</A></B>(1) value (similar to
<I>dpkg-architecture -qVARIABLE_HERE</I>).


<P>


When in doubt, the <B>DEB_HOST_*</B> variant is the one that will work both for
native and cross builds.


<P>


For performance reasons, debhelper will attempt to resolve these names from
the environment first before consulting <B><A HREF="/cgi-bin/man/man2html?1+dpkg-architecture">dpkg-architecture</A></B>(1).  This is
mostly mentioned for completeness as it will not matter for most cases.
<DT id="56"><B>Dollar</B><DD>


Expands to a single literal <B>$</B>-symbol.  This symbol will <I>never</I> be
considered part of a substitution variable.  That is:


<P>




<PRE>
   # Triggers an error
   ${NO_SUCH_TOKEN}
   # Expands to the literal value &quot;${NO_SUCH_TOKEN}&quot;
   ${Dollar}{NO_SUCH_TOKEN}

</PRE>




<P>


This variable equivalent to the sequence <B>${}</B> and the two can be used
interchangeably.
<DT id="57"><B>Newline</B>, <B>Space</B>, <B>Tab</B><DD>


Expands to a single <FONT SIZE="-1">ASCII</FONT> newline, space and tab respectively.


<P>


This can be useful if you need to include a literal whitespace character
(e.g. space) where it would otherwise be stripped or used as a separator.
<DT id="58"><B>env:</B><FONT SIZE="-1">NAME</FONT><B></B><DD>


Expands to the environment variable <I></I><FONT SIZE="-1"><I>NAME</I></FONT><I></I>.  The environment variable must
be set (but can be set to the empty string).
</DL>
<P>

Note that all variables must expand to a defined value.  As an example, if
debhelper sees <I>${env:FOO}</I>, then it will insist that the environment
variable <I></I><FONT SIZE="-1"><I>FOO</I></FONT><I></I> is set (it can be set to the empty string).
<P>

<I>Substitution limits</I>


<P>

To avoid infinite loops and resource exhaustion, debhelper will stop with an
error if the text contains many substitution variables (50) or they expand
beyond a certain size (4096 characters or 3x length of the original input -
whichever is bigger).
<A NAME="lbAJ">&nbsp;</A>
<H3>Fichiers de configuration de l'exécutable debhelper.</H3>



Si vous avez besoin de plus de flexibilité, de nombreux outils de debhelper
(par exemple <B><A HREF="/cgi-bin/man/man2html?1+dh_install">dh_install</A></B>(1)) prennent en charge l'exécution d'un fichier
de configuration comme un script.
<P>

Pour utiliser cette fonctionnalité, il suffit de marquer le fichier comme
exécutable (<B>&lt;chmod +x debian/</B>paquet<B>.install </B>&gt;). L'outil essaiera de
l'exécuter et utilisera la sortie du script. Le plus souvent, vous pouvez
utiliser <B><A HREF="/cgi-bin/man/man2html?1+dh-exec">dh-exec</A></B>(1) comme interpréteur du fichier de configuration pour
conserver la majorité de la syntaxe originale tout en gagnant en
flexibilité.
<P>

Lorsque vous utilisez des fichiers de configuration exécutables de
debhelper, veuillez vous souvenir des choses suivantes :
<DL COMPACT>
<DT id="59">&bull;<DD>
Le fichier de configuration exécutable <B>doit</B> se terminer avec succès (le
code de retour doit l'indiquer).
<DT id="60">&bull;<DD>
In compatibility level 13+, the output will be subject to substitutions (see
``Substitutions in debhelper config files'') where the tool support these.
Remember to be careful if your generator <I>also</I> provides substitutions as
this can cause unnecessary confusion.


<P>


Otherwise, the output will be used exactly as-is.  Notably, debhelper will
<I>not</I> expand wildcards or strip comments or strip whitespace in the output.
</DL>
<P>

Si vous avez besoin de construire le paquet sur un système de fichiers où
l'on ne peut pas désactiver le bit d'exécution, vous pouvez utiliser
<B><A HREF="/cgi-bin/man/man2html?1+dh-exec">dh-exec</A></B>(1) et son script <B>strip-output</B>.
<A NAME="lbAK">&nbsp;</A>
<H2>OPTIONS PARTAGÉES DE DEBHELPER</H2>



Tous les programmes de debhelper acceptent les options suivantes.
<DL COMPACT>
<DT id="61"><B>-v</B>, <B>--verbose</B><DD>


Mode verbeux : affiche toutes les commandes qui modifient le répertoire de
construction du paquet.
<DT id="62"><B>--no-act</B><DD>


Empêche la construction de s'effectuer réellement. Si cette option est
utilisée avec <B>-v</B>, le résultat sera l'affichage de ce que la commande
aurait fait.
<DT id="63"><B>-a</B>, <B>--arch</B><DD>


Construit tous les paquets dépendants de l'architecture <B></B><FONT SIZE="-1"><B>DEB_HOST_ARCH</B></FONT><B></B>.
<DT id="64"><B>-i</B>, <B>--indep</B><DD>


Construit tous les paquets indépendants de l'architecture.
<DT id="65"><B>-p</B><I>paquet</I>, <B>--package=</B><I>paquet</I><DD>


Construit le paquet nommé <I>paquet</I>. Cette option peut être répétée afin de
faire agir debhelper sur plusieurs paquets.
<DT id="66"><B>-s</B>, <B>--same-arch</B><DD>


Alias obsolète pour <B>-a</B>.


<P>


Cette option est supprimée dans le niveau de compatibilité 12.
<DT id="67"><B>-N</B><I>paquet</I>, <B>--no-package=</B><I>paquet</I><DD>


Exclut le paquet indiqué du processus de construction, même si l'option
<B>-a</B>, <B>-i</B> ou <B>-p</B> l'impliquait.
<DT id="68"><B>--remaining-packages</B><DD>


Exclut du processus de construction les paquets qui ont déjà été construits
préalablement par cette commande debhelper (c'est-à-dire, si la commande est
présente dans le journal de debhelper du paquet). Par exemple, si vous avez
besoin d'invoquer la commande avec des options spéciales seulement pour
certains paquets binaires, utilisez cette option lors de la dernière
invocation de la commande pour construire le reste des paquets avec les
options par défaut.
<DT id="69"><B>-P</B><I>tmpdir</I>, <B>--tmpdir=</B><I>tmpdir</I><DD>


Utilise le répertoire <I>tmpdir</I> pour construire les paquets. Sinon, par
défaut, le répertoire utilisé est debian/<I>paquet</I>
<DT id="70"><B>--mainpackage=</B><I>paquet</I><DD>


Cette option, peu utilisée, indique à debhelper le nom du « paquet
principal » pour lequel les fichiers <I>debian/toto</I> peuvent être utilisés à
la place des fichiers habituels <I>debian/paquet.toto</I>. Par défaut, debhelper
considère que le « paquet principal » est le premier paquet énuméré dans le
fichier <I>debian/control</I>.
<DT id="71"><B>-O=</B><I>option</I>|<I>ensemble</I><DD>


Cette option est utilisée par <B><A HREF="/cgi-bin/man/man2html?1+dh">dh</A></B>(1) pour passer une ou plusieurs options,
indiquées par l'utilisateur, à toutes les commandes exécutées. Si la
commande prend en charge l'option ou l'ensemble d'options, elle prendra
effet. Si la commande n'accepte pas l'option (ou une partie de l'ensemble
d'options), elle sera ignorée.
</DL>
<A NAME="lbAL">&nbsp;</A>
<H2>OPTIONS COURANTES DE DEBHELPER</H2>



Certains programmes de debhelper acceptent les options ci-dessous. Consulter
la page de manuel de chaque programme pour une explication complète du rôle
de ces options.
<DL COMPACT>
<DT id="72"><B>-n</B><DD>


Ne pas modifier les scripts de maintenance du paquet (<I>postinst</I>,
<I>postrm</I>, etc.)
<DT id="73"><B>-X</B><I>élément</I>, <B>--exclude=</B><I>élément</I><DD>


Permet d'exclure un élément du traitement. Cette option peut être employée
plusieurs fois afin d'exclure plusieurs éléments. L'<I>élément</I> est en
général une partie du nom de fichier, et tous les fichiers contenant le
texte indiqué seront exclus.
<DT id="74"><B>-A</B>, <B>--all</B><DD>


Précise que les fichiers (ou autres éléments) indiqués dans la ligne de
commande concernent <B>tous</B> les paquets construits et pas seulement le
premier.
</DL>
<A NAME="lbAM">&nbsp;</A>
<H2>OPTIONS DU PROCESSUS DE CONSTRUCTION</H2>



Les programmes debhelper <B>dh_auto_</B><I>*</I> comportent plusieurs processus de
construction et déterminent, de manière heuristique, lequel utiliser et
comment. Il peut être utile de modifier ce comportement par défaut. Tous ces
programmes <B>dh_auto_</B><I>*</I> acceptent les options suivantes, typiquement
passées à <B><A HREF="/cgi-bin/man/man2html?1+dh">dh</A></B>(1), qui les passe ensuite à tous les programmes
<B>dh_auto_</B><I>*</I>.
<DL COMPACT>
<DT id="75"><B>-S</B><I>processus de construction</I>, <B>--buildsystem=</B><I>processus_de_construction</I><DD>


Oblige à utiliser le processus de construction indiqué au lieu de tenter de
déterminer automatiquement celui qui pourrait être utilisable pour le
paquet.


<P>


Pass <B>none</B> as <I>buildsystem</I> to disable auto-selection.
<DT id="76"><B>-D</B><I>directory</I>, <B>--sourcedir=</B><I>directory</I>, <B>--sourcedirectory=</B><I>directory</I><DD>


Considère que les sources du paquet sont situées dans le <I>répertoire</I>
indiqué plutôt qu'au plus haut niveau de l'arborescence du paquet source.
<DT id="77"><B>-B</B>[<I>directory</I>], <B>--builddir</B>[<I>=directory</I>], <B>--builddirectory</B>[<I>=directory</I>]<DD>


Permet de construire le paquet en dehors de la structure source en utilisant
le <I>répertoire</I> indiqué comme répertoire de construction. Si le paramètre
<I>répertoire</I> n'est pas indiqué, un répertoire de construction par défaut
sera choisi.


<P>


Si cette option n'est pas indiquée, la construction se fera dans
l'arborescence source à moins que le processus exige ou préfère le faire en
dehors de cette structure. Dans ce cas, le répertoire par défaut sera
utilisé même si <B>--builddirectory</B> n'est pas indiqué.


<P>


Même si le système préfère utiliser, pour la construction, un répertoire
situé en dehors de l'arborescence source, il autorise quand même la
construction dans l'arborescence source. Pour cela, il suffit d'utiliser un
chemin d'accès au répertoire de construction identique au chemin d'accès au
répertoire source.
<DT id="78"><B>--parallel</B>, <B>--no-parallel</B><DD>


Détermine si la construction parallèle doit être utilisée, si le système
sous-jacent le permet. Le nombre de tâches parallèles est contrôlé, lors de
la construction, par la variable d'environnement <B></B><FONT SIZE="-1"><B>DEB_BUILD_OPTIONS</B></FONT><B></B>
(``Charte Debian,'' section 4.9.1). Ce nombre peut également être soumis aux
limites spécifiques du système de construction.


<P>


Si aucune de ces options n'est précisée, debhelper active la parallélisation
par défaut (<B>--parallel</B>) dans le niveau de compatibilité 10 (ou
supérieur), et la désactive (<B>--no-parallel</B>) dans les autres niveaux.


<P>


Pour des raisons d'optimisation, <B>dh</B> essaiera de ne pas passer ces options
aux processus fils si elles ne sont pas nécessaires et qu'elles sont les
seules options. Cela arrive en particulier lorsque <B></B><FONT SIZE="-1"><B>DEB_BUILD_OPTIONS</B></FONT><B></B> n'a
pas de paramètre <I>parallel</I> (ou si sa valeur est <B>1</B>).
<DT id="79"><B>--max-parallel=</B><I>maximum</I><DD>


Cette option implique <B>--parallel</B> et permet de limiter le nombre de tâches
qui pourront être lancées lors d'une compilation parallèle. Si la
construction du paquet est connue pour ne fonctionner qu'avec un certain
niveau de parallélisme, il est possible de le régler à la valeur maximale
censée fonctionner, ou que vous souhaitez mettre en œuvre.


<P>


En particulier, régler le maximum à <B>1</B> équivaut à l'utilisation de
<B>--no-parallel</B>.
<DT id="80"><B>--reload-all-buildenv-variables</B><DD>


By default, <B><A HREF="/cgi-bin/man/man2html?1+dh">dh</A></B>(1) will compute several environment (e.g. by using
<B><A HREF="/cgi-bin/man/man2html?1+dpkg-buildflags">dpkg-buildflags</A></B>(1)) and cache them to avoid having all <B>dh_auto_*</B> tool
recompute them.


<P>


When passing this option, the concrete <B>dh_auto_*</B> tool will ignore the
cache from <B><A HREF="/cgi-bin/man/man2html?1+dh">dh</A></B>(1) and retrigger a rebuild of these variables.  This is
useful in the very rare case where the package need to do multiple builds
but with different <B>...FLAGS</B> options.  A concrete example would be needing
to change the <B>-O</B> parameter in <B></B><FONT SIZE="-1"><B>CFLAGS</B></FONT><B></B> in the second build:


<P>




<PRE>
    export DEB_CFLAGS_MAINT_APPEND=-O3

    %:
        dh $@

    override_dh_auto_configure:
        dh_auto_configure -Bbuild-deb ...
        DEB_CFLAGS_MAINT_APPEND=-Os dh_auto_configure \
           --reload-all-buildenv-variables -Bbuild-udeb ...

</PRE>




<P>


Without <B>--reload-all-buildenv-variables</B> in the second call to
<B><A HREF="/cgi-bin/man/man2html?1+dh_auto_configure">dh_auto_configure</A></B>(1), the change in <B></B><FONT SIZE="-1"><B>DEB_CFLAGS_MAINT_APPEND</B></FONT><B></B> would be
ignored as <B><A HREF="/cgi-bin/man/man2html?1+dh_auto_configure">dh_auto_configure</A></B>(1) would use the cached value of <B></B><FONT SIZE="-1"><B>CFLAGS</B></FONT><B></B>
set by <B><A HREF="/cgi-bin/man/man2html?1+dh">dh</A></B>(1).


<P>


This option is only available with <B>debhelper (&gt;= 12.7~)</B> when the
package uses compatibility level 9 or later.
<DT id="81"><B>--list</B>, <B>-l</B><DD>


Liste tous les processus de construction pris en charge par le
système. Cette liste inclut à la fois les processus par défaut et les
processus tiers (marqués comme tels). Cette option montre également le
processus de construction automatiquement sélectionné ou celui indiqué
manuellement avec l'option <B>--buildsystem</B>.
</DL>
<A NAME="lbAN">&nbsp;</A>
<H2>NIVEAUX DE COMPATIBILITÉ</H2>



Parfois, des modifications majeures de debhelper doivent être faites et vont
briser la compatibilité ascendante. Ces modifications sont nécessaires pour
conserver à debhelper ses qualités de conception et d'écriture, car les
besoins changent et le savoir-faire de l'auteur s'améliore. Pour éviter que
de tels changements ne cassent les paquets existants, un concept de niveau
de compatibilité debhelper a été introduit. On devra préciser à debhelper le
niveau de compatibilité qu'il doit employer, ce qui modifiera son
comportement de diverses manières.
<P>

Dans la version actuelle de debhelper, vous pouvez spécifier le niveau de
compatibilité à utiliser dans <I>debian/control</I> en ajoutant une dépendance
de construction (Build-Depends) sur le paquet debhelper-compat. Par exemple,
pour exploiter la version 12, assurez-vous d'indiquer dans
<I>debian/control</I> :
<P>



<PRE>
  Build-Depends: debhelper-compat (= 12)

</PRE>


<P>

Cela sert aussi à avoir une dépendance de construction sur une version
suffisante de debhelper. Ainsi il n'est pas nécessaire d'indiquer une
dépendance de construction particulière sur debhelper, sauf si vous avez
besoin d'une mise à jour spécifique (comme pour l'introduction d'une
nouvelle fonctionnalité ou une correction de bogue à l'intérieur d'un niveau
de compatibilité).
<P>

Veuillez noter que debhelper ne fournit pas debhelper-compat pour
experimental ou pour les niveaux en version bêta. Les paquets qui souhaitent
expérimenter avec cela devraient utiliser <I>debian/compat</I> ou <B></B><FONT SIZE="-1"><B>DH_COMPAT</B></FONT><B></B>.
<P>

Les versions précédentes de debhelper nécessitaient d'indiquer le niveau de
compatibilité dans le fichier <I>debian/compat</I>, et la version actuelle
continue à le comprendre pour des raisons de compatibilité. Cependant, un
paquet ne devrait pas spécifier son niveau de compatibilité par plusieurs
méthodes à la fois. Pour utiliser cette méthode, <I>debian/compat</I> doit
contenir le niveau de compatibilité comme une valeur entière, et rien
d'autre. Si vous indiquez le niveau de compatibilité ainsi, votre paquet
aura besoin d'une dépendance de construction versionnée sur debhelper, égale
(ou supérieure) au niveau de compatibilité utilisé. Ainsi, si vous indiquez
le niveau 12 dans <I>debian/compat</I>, assurez-vous que le
fichier <I>debian/control</I> contient :
<P>



<PRE>
  Build-Depends: debhelper (&gt;= 12~)

</PRE>


<P>

Sauf indication contraire, toute la documentation de debhelper suppose
l'utilisation du niveau de compatibilité le plus récent, et, dans la plupart
des cas ne précise pas si le comportement est différent avec les niveaux de
compatibilité antérieurs. De ce fait, si le niveau de compatibilité le plus
récent n'est pas celui utilisé, il est fortement conseillé de lire les
indications ci-dessous qui exposent les différences dans les niveaux de
compatibilité antérieurs.
<A NAME="lbAO">&nbsp;</A>
<H3>Niveaux de compatibilité pris en charge</H3>



Les niveaux de compatibilité sont les suivants :
<DL COMPACT>
<DT id="82">v5<DD>


C'est le niveau de compatibilité le plus bas pris en charge.


<P>


Si vous mettez à jour depuis un niveau de compatibilité antérieur, veuillez
consulter <B><A HREF="/cgi-bin/man/man2html?7+debhelper-obsolete-compat">debhelper-obsolete-compat</A></B>(7).


<P>


Ce mode est déconseillé.
<DT id="83">v6<DD>


Les changements par rapport à la version 5 sont :
<DL COMPACT><DT id="84"><DD>
<DL COMPACT>
<DT id="85">-<DD>
Les commandes qui génèrent des lignes de codes de maintenance les mettront
dans l'ordre inverse dans les scripts <I>prerm</I> et <I>postrm</I>.
<DT id="86">-<DD>
<B>dh_installwm</B> installera un lien vers une page de manuel esclave pour
<I>x-window-manager.1.gz</I> s'il voit la page de manuel dans le répertoire
<I>usr/share/man/man1</I> du répertoire de construction du paquet.
<DT id="87">-<DD>
Auparavant, <B>dh_builddeb</B> ne supprimait pas les associations créées avec
<B></B><FONT SIZE="-1"><B>DH_ALWAYS_EXCLUDE</B></FONT><B></B> s'il était configuré sur une liste d'éléments tels que
<B></B><FONT SIZE="-1"><B>CVS:</B></FONT><B>.svn:.git</B>. Maintenant il le fait.
<DT id="88">-<DD>
<B>dh_installman</B> permet d'écraser les pages de manuel existantes dans le
répertoire de construction du paquet. Auparavant, il refusait en silence de
le faire.
</DL>
</DL>

<DL COMPACT><DT id="89"><DD>


<P>


Ce mode est déconseillé.
</DL>

<DT id="90">v7<DD>


Les changements par rapport à la version 6 sont :
<DL COMPACT><DT id="91"><DD>
<DL COMPACT>
<DT id="92">-<DD>
<B>dh_install</B> cherchera récursivement les fichiers dans <I>debian/tmp</I> s'il
ne les trouve pas dans le répertoire courant (ou dans le répertoire indiqué
par <B>--sourcedir</B>). Cela permet à <B>dh_install</B> d'interopérer avec
<B>dh_auto_install</B> qui place les fichiers dans <I>debian/tmp</I>, sans
nécessiter de paramètres particuliers.
<DT id="93">-<DD>
<B>dh_clean</B> lit le répertoire <I>debian/clean</I> et supprime les fichiers qui y
sont mentionnés.
<DT id="94">-<DD>
<B>dh_clean</B> supprime les fichiers <I>*-stamp</I>.
<DT id="95">-<DD>
<B>dh_installchangelogs</B> déterminera à quel fichier correspond le changelog
amont si rien n'est indiqué.
</DL>
</DL>

<DL COMPACT><DT id="96"><DD>


<P>


Ce mode est déconseillé.
</DL>

<DT id="97">v8<DD>


Les changements par rapport à la version 7 sont :
<DL COMPACT><DT id="98"><DD>
<DL COMPACT>
<DT id="99">-<DD>
Les commandes échoueront plutôt que de produire une alerte lorsqu'elles
recevront des options inconnues.
<DT id="100">-<DD>
<B>dh_makeshlibs</B> va exécuter le programme <B>dpkg-gensymbols</B> sur toutes les
bibliothèques partagées qu'il génère pour les fichiers shlibs. <B>-X</B> peut
alors être utilisé pour exclure certaines bibliothèques. En outre, les
bibliothèques rangées à des emplacements inhabituels que <B>pkg-gensymbols</B>
n'aurait pas traitées avant qu'elles ne lui soient transmises, induisent un
changement de comportement qui peut causer l'échec de la construction de
certains paquets.
<DT id="101">-<DD>
<B>dh</B> exige que la séquence à exécuter soit indiquée en tant que premier
paramètre. Tous les commutateurs doivent venir après. C'est-à-dire qu'il
faut écrire « <B>dh $@</B> --toto », et non « <B>dh --toto</B> $@ »
<DT id="102">-<DD>
<B>dh_auto_*</B> utilise préférentiellement <B>Module::Build</B> de Perl au lieu de
<I>Makefile.PL</I>.
</DL>
</DL>

<DL COMPACT><DT id="103"><DD>


<P>


Ce mode est déconseillé.
</DL>

<DT id="104">v9<DD>


Les changements par rapport à la version 8 sont :
<DL COMPACT><DT id="105"><DD>
<DL COMPACT>
<DT id="106">-<DD>
Prise en charge multiarchitecture. En particulier, <B>dh_auto_configure</B>
passe les répertoires multiarchitectures à <B>autoconf</B> dans <B>--libdir</B> et
<B>--libexecdir</B>.
<DT id="107">-<DD>
<B>dh</B> connaît les dépendances classiques entre les cibles de
<I>debian/rules</I>. Donc « <B>dh binary</B> » exécutera toutes les cibles build,
build-arch, build-indep, install, etc., présentes dans le fichier
<I>rules</I>. Il n'est pas nécessaire de définir une cible binary avec des
dépendances explicites sur les autres cibles.
<DT id="108">-<DD>
<B>dh_strip</B> compresse les fichiers de symboles de mise au point pour réduire
la taille d'installation des paquets -dbg.
<DT id="109">-<DD>
<B>dh_auto_configure</B> n'inclut pas le nom du paquet source dans
<B>--libexecdir</B> en utilisant <B>autoconf</B>.
<DT id="110">-<DD>
<B>dh</B> n'active pas <B>--with=python-support</B> par défaut.


<P>


(Obsolète puisque l'outil <B>dh_pysupport</B> a été retiré de
Debian Stretch. Depuis debhelper 10.3, <B>dh</B> n'active plus cette séquence
quel que soit le niveau de compatibilité)
<DT id="111">-<DD>
Tous les programmes debhelper <B>dh_auto_</B><I>*</I> et <B>dh</B> configurent les
variables d'environnement renvoyées par <B>dpkg-buildflags</B>, sauf si elles
sont déjà configurées.
<DT id="112">-<DD>
<B>dh_auto_configure</B> passe les <FONT SIZE="-1">CFLAGS, CPPFLAGS</FONT> et <FONT SIZE="-1">LDFLAGS</FONT> de
<B>dpkg-buildflags</B> à <I>Makefile.PL</I> et <I>Build.PL</I> de Perl.
<DT id="113">-<DD>
<B>dh_strip</B> place les symboles de mise au point séparés à un endroit en
fonction de leur identifiant de construction (build-id).
<DT id="114">-<DD>
Les fichiers de configuration exécutables de debhelper sont exécutés et leur
sortie est utilisée comme configuration.
</DL>
</DL>

<DL COMPACT><DT id="115"><DD>
</DL>

<DT id="116">v10<DD>


Les changements par rapport à la version 9 sont :
<DL COMPACT><DT id="117"><DD>
<DL COMPACT>
<DT id="118">-<DD>
<B>dh_installinit</B> n'installe plus de fichier nommé debian/&lt;paquet&gt; comme
script d'initialisation.
<DT id="119">-<DD>
<B>dh_installdocs</B> renverra une erreur s'il détecte des liens créés avec
<B>--link-doc</B> entre des paquets de l'architecture « all » et non-« all » car
cela casse les binNMUs (envois de binaires par quelqu'un d'autre que le
responsable).
<DT id="120">-<DD>
<B>dh_installdeb</B> n'installe plus de fichier debian/&lt;paquet&gt;.shlibs fourni
par le responsable du paquet. Cela est maintenant effectué par
<B>dh_makeshlibs</B>.
<DT id="121">-<DD>
<B>dh_installwm</B> refuse de créer un paquet cassé si aucune page de manuel ne
peut être trouvée (requis pour l'inscription de l'alternative
x-window-manager).
<DT id="122">-<DD>
Debhelper active par défaut la parallélisation pour tous les systèmes de
construction qui le gèrent. Cela peut être désactivé en utilisant l'option
<B>--no-parallel</B> ou en passant la valeur <B>1</B> à l'option <B>--max-parallel</B>.
<DT id="123">-<DD>
La commande <B>dh</B> n'acceptera aucun des paramètres obsolètes de « manual
sequence control » (<B>--before</B>, <B>--after</B>, etc.). Veuillez utiliser les
cibles de réécritures à la place.


<P>


<B>Retroactively applied to earlier compat levels</B>: <B>dh</B> no longer accepts
any of these since debhelper/12.4.
<DT id="124">-<DD>
La commande <B>dh</B> n'utilisera plus les fichiers journaux pour enregistrer
quelles commandes ont été exécutées. La commande <B>dh</B> se souvient
<I>toujours</I> si la séquence « build » a été effectuée et l'omet si c'est le
cas.


<P>


Les principales conséquences de cela sont :
<DL COMPACT><DT id="125"><DD>
<DL COMPACT>
<DT id="126">-<DD>
Il est maintenant plus facile de déboguer les séquences <I>install</I> et
<I>binary</I> parce qu'elles peuvent maintenant être facilement re-exécutées
(sans avoir à refaire un cycle complet de « clean &amp; rebuild »)
<DT id="127">-<DD>
La principale précaution est que <B>dh_*</B> enregistre uniquement ce qui s'est
passé dans une unique cible de réécriture. Lorsque tous les appels à une
commande <B>dh_cmd</B> donnée arrivent dans la même cible de réécriture, tout
fonctionnera comme avant.


<P>


Exemple de ce qui pourrait mal se passer :


<P>




<PRE>
  override_dh_foo:
    dh_foo -pmon_paquet

  override_dh_bar:
    dh_bar
    dh_foo --remaining

</PRE>




<P>


Dans ce cas, l'appel à <B>dh_foo --remaining</B> inclura <I>aussi</I> <I>mon_paquet</I>,
car <B>dh_foo -pmon_paquet</B> a été exécuté dans une cible de réécriture
différente. Ce problème n'est pas limité à <B>--remaining</B> et concerne aussi
<B>-a</B>, <B>-i</B>, etc.
</DL>
</DL>

<DL COMPACT><DT id="128"><DD>
</DL>

<DT id="129">-<DD>
À présent, la commande <B>dh_installdeb</B> échappe les caractères du shell dans
les lignes du fichier de config <I>maintscript</I>. C'était l'intention
originale mais cela n'a jamais fonctionné correctement et les paquets ont
commencé à compter sur l'échappement incomplet (p. ex. en encadrant les noms
de fichiers de guillemets).
<DT id="130">-<DD>
La commande <B>dh_installinit</B> utilise maintenant <B>--restart-after-upgrade</B>
par défaut. Les paquets nécessitant le comportement précédent devraient
utiliser l'option <B>--no-restart-after-upgrade</B>.
<DT id="131">-<DD>
La séquence <B>autoreconf</B> est maintenant activée par défaut. Veuillez passer
l'option <B>--without autoreconf</B> à <B>dh</B> si cela n'est pas voulu pour
certains paquets.
<DT id="132">-<DD>
La séquence <B>systemd</B> est maintenant activée par défaut. Veuillez passer
l'option <B>--without systemd</B> à <B>dh</B> si cela n'est pas voulu pour certains
paquets.
<DT id="133">-<DD>
<B>Supprimé rétroactivement :</B> <B>dh</B> ne crée plus le répertoire de
construction du paquet lors de l'omission des commandes debhelper en
cours. Cela n'affectera pas les paquets qui se construisent uniquement avec
debhelper, mais pourrait faire apparaître des bogues dans les commandes qui
ne sont pas incluses avec debhelper.


<P>


Cette fonctionnalité de compatibilité avait un bogue depuis sa création dans
debhelper/9.20130516, qui la faisait échouer en compat 9 et précédent. Comme
il n'y a eu aucun rapport de problème causé par ce bogue en 5 ans, cela a
été supprimé plutôt que corrigé.
</DL>
</DL>

<DL COMPACT><DT id="134"><DD>
</DL>

<DT id="135">v11<DD>


This mode is discouraged.


<P>


The compat 11 is discouraged for new packages as it suffers from feature
interaction between dh_installinit and dh_installsystemd causing
services to not run correctly in some cases.  Please consider using
compatibility mode 10 or 12 instead.  More details about the issue are
available in Debian#887904 and
&lt;<A HREF="https://lists.debian.org/debian-release/2019/04/msg01442.html">https://lists.debian.org/debian-release/2019/04/msg01442.html</A>&gt;.


<P>


Les changements par rapport à la version 10 sont :
<DL COMPACT><DT id="136"><DD>
<DL COMPACT>
<DT id="137">-<DD>
<B>dh_installinit</B> n'installe plus de fichiers <I>service</I> ou <I>tmpfile</I>, ni
ne crée de scripts de maintenance pour ces fichiers. Veuillez utiliser le
nouvel assistant <B>dh_installsystemd</B> à la place.
<DT id="138">-<DD>
Les outils <B>dh_systemd_enable</B> et <B>dh_systemd_start</B> ont été remplacés par
un nouvel assistant <B>dh_installsystemd</B>. Pour la même raison, la séquence
<B>systemd</B> de <B>dh</B> a aussi été retirée. Si vous avez besoin de désactiver
<B>dh_installsystemd</B>, veuillez utiliser une cible de réécriture vide.


<P>


Veuillez noter que <B>dh_installsystemd</B> a un comportement légèrement
différent dans certains cas (par exemple lors de l'utilisation du paramètre
<B>--name</B>).
<DT id="139">-<DD>
<B>dh_installdirs</B> ne crée plus les répertoires debian/<I>paquet</I> sans qu'on
le lui demande explicitement (ou il doit créer un sous-répertoire à
l'intérieur).


<P>


La grande majorité des paquets ne seront pas affectés par ce changement.
<DT id="140">-<DD>
Le système de construction <B>makefile</B> passe maintenant les options
<B>INSTALL=``install --strip-program=true''</B> à <B><A HREF="/cgi-bin/man/man2html?1+make">make</A></B>(1). Les systèmes dérivés
(comme <B>configure</B> ou <B>cmake</B>) ne sont pas affectés par ce changement.
<DT id="141">-<DD>
Le système de construction <B>autoconf</B> passe maintenant l'option
<B>--runstatedir=/run</B> à <I>./configure</I>.
<DT id="142">-<DD>
Le système de construction <B>cmake</B> passe maintenant l'option
<B>-DCMAKE_INSTALL_RUNSTATEDIR=/run</B> à <B><A HREF="/cgi-bin/man/man2html?1+cmake">cmake</A></B>(1).
<DT id="143">-<DD>
<B>dh_installman</B> préfère maintenant détecter le langage à partir du chemin
plutôt que de l'extension.
<DT id="144">-<DD>
<B>dh_auto_install</B> crée maintenant uniquement le répertoire de destination
nécessaire. Auparavant, le répertoire de construction de chaque paquet était
créé. Cela n'affectera pas les paquets qui se construisent uniquement avec
debhelper, mais pourrait faire apparaître des bogues dans les commandes qui
ne sont pas incluses avec debhelper.
<DT id="145">-<DD>
Les outils <B>dh_installdocs</B>, <B>dh_installexamples</B>, <B>dh_installinfo</B> et
<B>dh_installman</B> renvoient maintenant une erreur si leur configuration
contient un motif qui ne correspond à rien ou qui référence un chemin qui
n'existe pas.


<P>


Les exceptions connues incluent la construction avec le profil <B>nodoc</B>, où
les outils ci-dessus permettront un échec silencieux de la correspondance
lorsque le motif est utilisé pour spécifier la documentation.
<DT id="146">-<DD>
Les outils <B>dh_installdocs</B>, <B>dh_installexamples</B>, <B>dh_installinfo</B> et
<B>dh_installman</B> acceptent maintenant le paramètre <B>--sourcedir</B> avec la
même signification que dans <B>dh_install</B>. De plus, ils se rabattent sur
<I>debian/tmp</I> comme <B>dh_install</B>.


<P>


Note de migration : un bogue dans debhelper 11 jusqu'à 11.1.5 faisait que
<B>dh_installinfo</B> ignorait <B>--sourcedir</B> de manière incorrecte.
<DT id="147">-<DD>
Les systèmes de construction <B>perl-makemaker</B> et <B>perl-build</B> ne passent
plus l'option <B>-I.</B> à Perl. Les paquets qui ont encore besoin de ce
comportement peuvent l'émuler en utilisant la variable d'environnement
<B></B><FONT SIZE="-1"><B>PERL5LIB</B></FONT><B></B>. Par exemple en ajoutant <B>export PERL5LIB=.</B> dans leur fichier
<I>debian/rules</I> (ou équivalent).
<DT id="148">-<DD>
La variable d'environnement <B></B><FONT SIZE="-1"><B>PERL_USE_UNSAFE_INC</B></FONT><B></B> n'est plus définie par
<B>dh</B>, ni aucun des outils <B>dh_auto_*</B>. Cela avait été ajouté comme
contournement temporaire, pour éviter les échecs de construction d’un grand
nombre de paquets en même temps.


<P>


De plus, cette fonction deviendra peut-être obsolète car l'amont a
l'intention de retirer la prise en charge de la variable d'environnement
<B></B><FONT SIZE="-1"><B>PERL_USE_UNSAFE_INC</B></FONT><B></B>. Lorsque ce sera le cas, cette variable sera aussi
supprimée rétroactivement des niveaux de compatibilité existants.
<DT id="149">-<DD>
L'assistant <B>dh_makeshlibs</B> termine maintenant sur une erreur si objdump
renvoie une valeur de sortie différente de zéro lors de l'analyse d'un
fichier.
<DT id="150">-<DD>
Les outils <B>dh_installdocs</B> et <B>dh_installexamples</B> pourraient maintenant
installer <I>la plupart</I> de la documentation dans un répertoire différent,
pour satisfaire les recommandations de la Charte Debian §12.3 (depuis la
version 3.9.7).


<P>


Si un paquet source contient un seul paquet binaire dans <I>debian/control</I>,
ou si aucun des paquets n'est un paquet <I>-doc</I>, alors ce changement n'a pas
d'effet pour ce paquet source, et vous pouvez aller au changement suivant.


<P>


Par défaut, ces outils essaient maintenant de déterminer un « paquet
principal pour la documentation » (que l'on appellera <I>doc-main-package</I>)
pour chaque paquet <I>-doc</I>. S'ils trouvent un tel <I>doc-main-package</I>, ils
installeront la documentation sous <I>/usr/share/doc/doc-main-package</I>
pour le paquet considéré. C'est-à-dire que le chemin peut changer, mais la
documentation est toujours fournie par le paquet <I>-doc</I>.


<P>


L'option <B>--doc-main-package</B> peut être utilisée si la détection
automatique est insuffisante, ou pour réinitialiser le chemin à sa valeur
précédente s'il y a une raison de diverger des recommandations de la
Charte Debian.


<P>


Quelques documents ne sont pas affectés par ce changement. En particulier le
fichier copyright, les fichiers changelog, <FONT SIZE="-1">README</FONT>.Debian, etc. Ces fichiers
seront toujours installés sous <I>/usr/share/doc/package</I>.
<DT id="151">-<DD>
Les outils <B>dh_strip</B> et <B>dh_shlibdeps</B> n'utilisent plus les motifs de
noms de fichiers pour déterminer les fichiers à traiter. À la place, ils
ouvrent le fichier et cherchent un en-tête <FONT SIZE="-1">ELF</FONT> pour déterminer si ce fichier
est un objet partagé ou un exécutable <FONT SIZE="-1">ELF.</FONT>


<P>


Ce changement peut forcer les outils à traiter plus de fichiers qu'avant.
</DL>
</DL>

<DL COMPACT><DT id="152"><DD>
</DL>

<DT id="153">v12<DD>


C'est la version dont l'usage est recommandé.


<P>


Les changements par rapport à la version 11 sont :
<DL COMPACT><DT id="154"><DD>
<DL COMPACT>
<DT id="155">-<DD>
<B>dh_makeshlibs</B> génère maintenant des fichiers shlibs avec des dépendances
versionnées par défaut. Cela veut dire que <B>-VUpstream-Version</B> (ou <B>-V</B>)
est maintenant le comportement par défaut.


<P>


If an unversioned dependency in the shlibs file is wanted, this can be
obtained by passing <B>-VNone</B> instead.  However, please see
<B><A HREF="/cgi-bin/man/man2html?1+dh_makeshlibs">dh_makeshlibs</A></B>(1) for the caveat of unversioned dependencies.
<DT id="156">-<DD>
L'option <B>-s</B> (<B>--same-arch</B>) est supprimée. Veuillez utiliser <B>-a</B>
(<B>--arch</B>) à la place.
<DT id="157">-<DD>
Appeler <B>dh_clean -k</B> provoque maintenant une erreur à la place de
l'avertissement d'obsolescence.
<DT id="158">-<DD>
L'option <B>--no-restart-on-upgrade</B> de <B>dh_installinit</B> a été
supprimée. Veuillez utiliser le nouveau nom <B>--no-stop-on-upgrade</B>.
<DT id="159">-<DD>
Il y avait un bogue dans les fonctions <B>doit</B> (et équivalent) de
Debian::Debhelper::Dh_Lib qui créait un shell dans une circonstance
particulière. Ce bogue est maintenant supprimé et provoquera une erreur de
type « commande non trouvée » dans les outils qui l'utilisaient.
<DT id="160">-<DD>
Les options <B>--list-missing</B> et <B>--fail-missing</B> de <B>dh_install</B> ont été
supprimées. Veuillez utiliser <B>dh_missing</B> et ses options correspondantes,
qui peuvent aussi voir les fichiers installés par les autres outils.
<DT id="161">-<DD>
L'outil <B>dh_installinit</B> n'installe plus de configuration pour upstart. À
la place, il abandonnera la construction s'il trouve un ancien fichier de
configuration upstart. Cela pour rappeler au mainteneur de s'assurer de
correctement supprimer les anciens fichiers de configuration livrés dans les
anciennes versions du paquet.
<DT id="162">-<DD>
L'outil <B>dh_installdeb</B> valide basiquement quelques commandes
<B><A HREF="/cgi-bin/man/man2html?1+dpkg-maintscript-helper">dpkg-maintscript-helper</A></B>(1) et renvoie une erreur si la commande semble
incorrecte.
<DT id="163">-<DD>
Le comportement par défaut de <B>dh_missing</B> est maintenant
<B>--list-missing</B>.
<DT id="164">-<DD>
<B>dh_makeshlibs</B> passera maintenant les bibliothèques à
<B><A HREF="/cgi-bin/man/man2html?1+dpkg-gensymbols">dpkg-gensymbols</A></B>(1) si le binaire <FONT SIZE="-1">ELF</FONT> a un <FONT SIZE="-1">SONAME</FONT> (contenant « .so »).
<DT id="165">-<DD>
<B>dh_compress</B> ne compresse plus les exemples (c'est-à-dire tout ce qui est
installé dans <I>&lt;/usr/share/doc/paquet/examples</I>&gt;).
<DT id="166">-<DD>
La séquence standard de <B>dh</B> comprend maintenant <B>dh_dwz</B> et
<B>dh_installinitramfs</B> par défaut. Cela rend les séquences <B>dwz</B> et
<B>installinitramfs</B> obsolètes et elles échoueront avec une erreur. Si vous
souhaitez sauter ces commandes, veuillez insérer des cibles de réécriture
vides pour elles dans <I>debian/rules</I> (par exemple <I>override_dh_dwz:</I>).
<DT id="167">-<DD>
Les systèmes de construction <B>meson</B> et <B>autoconf</B> ne positionnent plus
explicitement la variable <B>--libexecdir</B>, et s'appuient donc sur le système
de construction par défaut – qui devrait être <B>/usr/libexec</B> (selon la
<FONT SIZE="-1">FHS 3.0,</FONT> adoptée dans la Charte Debian 4.1.5).


<P>


Si un paquet amont particulier n'utilise pas la bonne valeur par défaut, le
paramètre peut souvent être passé manuellement avec
<B><A HREF="/cgi-bin/man/man2html?1+dh_auto_configure">dh_auto_configure</A></B>(1). Par exemple :


<P>




<PRE>
    override_dh_auto_configure:
        dh_auto_configure -- --libexecdir=/usr/libexec

</PRE>




<P>


Remarquez le <B>--</B> avant le paramètre <B>--libexecdir</B>.
<DT id="168">-<DD>
<B>dh_installdeb</B> n'installe plus le fichier <I>conffiles</I> fournit par le
responsable. Ce fichier est obsolète depuis le niveau de compatibilité 3,
lorsque <B>dh_installdeb</B> a commencé à calculer automatiquement le
<I>conffiles</I> résultant du fichier control.
<DT id="169">-<DD>
<B>dh_installsystemd</B> ne s'appuie plus sur <B>dh_installinit</B> pour s'occuper
des services systemd qui ont une alternative pour sysvinit. Les deux outils
doivent maintenant être utilisés dans ce cas pour s'assurer que le service
est démarré correctement, à la fois avec systemd et sysvinit.


<P>


Si vous avez une réécriture pour <B>dh_installinit</B> (par exemple pour
l'appeler avec <B>--no-start</B>), vous en aurez sûrement besoin d'une pour
<B>dh_installsystemd</B> aussi.


<P>


Ce changement amène <B>dh_installinit</B> à injecter un champ
<I>misc:Pre-Depends</I> sur <B>init-system-helpers (&gt;= 1.54~)</B>. Veuillez vous
assurer que le paquet utilise <B>${misc:Pre-Depends}</B> dans son champ
<B>Pre-Depends</B> avant de mettre à niveau vers la compat 12.
<DT id="170">-<DD>
L'outil tiers <B>dh_golang</B> (du paquet <B>dh-golang</B>) utilise maintenant la
variable <B></B><FONT SIZE="-1"><B>DH_GOLANG_EXCLUDE</B></FONT><B></B> pour l'installation des sources dans les
paquets -dev, et plus uniquement lors de la construction. Veuillez
positionner <B></B><FONT SIZE="-1"><B>DH_GOLANG_EXCLUDES_ALL</B></FONT><B></B> à faux pour obtenir le comportement
précédent. Consultez <B><A HREF="/cgi-bin/man/man2html?3pm+Debian::Debhelper::Buildsystem::golang">Debian::Debhelper::Buildsystem::golang</A>(3pm)</B> pour
plus de détails et des exemples.
<DT id="171">-<DD>
<B>dh_installsystemduser</B> est maintenant inclus par défaut dans la séquence
<B>dh</B> standard.
<DT id="172">-<DD>
Le système de construction <B>python-distutils</B> est supprimé. Veuillez
utiliser le système tiers <B>pybuild</B> à la place.
</DL>
</DL>

<DL COMPACT><DT id="173"><DD>
</DL>

<DT id="174">v13<DD>


Ce niveau de compatibilité est encore en développement ; à utiliser avec
précaution.


<P>


Les changements par rapport à la version 12 sont :
<DL COMPACT><DT id="175"><DD>
<DL COMPACT>
<DT id="176">-<DD>
Le système de construction <B>meson+ninja</B> utilise maintenant <B>meson test</B> à
la place de <B>ninja test</B> pour la suite de tests. Chaque réécriture de
<B>dh_auto_test</B> qui passe des paramètres supplémentaires aux tests amont
devrait être vérifiée, car <B>meson test</B> n'est pas compatible avec <B>ninja
test</B>.
<DT id="177">-<DD>
All debhelper like tools based on the official debhelper library (including
<B>dh</B> and the official <B>dh_*</B> tools) no longer accepts abbreviated command
parameters.  At the same time, <B>dh</B> now optimizes out calls to redundant
<B>dh_*</B> helpers even when passed long command line options.
<DT id="178">-<DD>
The <FONT SIZE="-1">ELF</FONT> related debhelper tools (<B>dh_dwz</B>, <B>dh_strip</B>, <B>dh_makeshlibs</B>,
<B>dh_shlibdeps</B>) are now only run for arch dependent packages by default
(i.e. they are excluded from <B>*-indep</B> targets and are passed <B>-a</B> by
default). If you need them for <B>*-indep</B> targets, you can add an explicit
Build-Depends on <B>dh-sequence-elf-tools</B>.
<DT id="179">-<DD>
The third-party <B>gradle</B> build system (from <B>gradle-debian-helper</B>
package) now runs the upstream-provided test suite automatically.  To
suppress such behavior, override <B>dh_auto_test</B>.
<DT id="180">-<DD>
The <B>dh_installman</B> tool now aborts if it sees conflicting definitions of a
manpage.  This typically happens if the upstream build system is installing
a compressed version and the package lists an uncompressed version of the
manpage in <I>debian/package.manpages</I>.  Often the easiest fix is to
remove the manpage from <I>debian/package.manpages</I> (assuming both
versions are identical).
<DT id="181">-<DD>
The <B>dh_auto_*</B> helpers now resets the environment variables <B></B><FONT SIZE="-1"><B>HOME</B></FONT><B></B> and
common <B>XDG_*</B> variable.  <B></B><FONT SIZE="-1"><B>HOME</B></FONT><B></B> and <B></B><FONT SIZE="-1"><B>XDG_RUNTIME_DIR</B></FONT><B></B> are each set to a
distinct writable directory. The rest of the environment variables are
cleared.
<DT id="182">-<DD>
The <B>dh</B> command will now error if an override or hook target for an
obsolete command are present in <I>debian/rules</I>
(e.g. <B>override_dh_systemd_enable:</B>).
<DT id="183">-<DD>
The <B>dh_missing</B> command will now default to <B>--fail-missing</B>.  This can
be reverted to a non-fatal warning by explicitly passing <B>--list-missing</B>
like it was in compat 12.


<P>


If you do not want the warning either, please omit the call to
<B>dh_missing</B>.  If you use the <B>dh</B> command sequencer, then you can do this
by inserting the an empty override target in the <I>debian/rules</I> file of the
relevant package.  As an example:


<P>




<PRE>
    # Disable dh_missing
    override_dh_missing:

</PRE>


<DT id="184">-<DD>
The <B>dh</B> command sequencer now runs <B>dh_installtmpfiles</B> in the default
sequence.  The <B>dh_installtmpfiles</B> takes over handling of tmpfiles.d
configuration files.  Related functionality in <B>dh_installsystemd</B> is now
disabled.


<P>


Note that <B>dh_installtmpfiles</B> responds to <I>debian/package.tmpfiles</I> where <B>dh_installsystemd</B> used a name without the trailing ``s''.
<DT id="185">-<DD>
Many <B>dh_*</B> tools now support limited variable expansion via the <B>${foo}</B>
syntax.  In many cases, this can be used to reference paths that contain
either spaces or <B><A HREF="/cgi-bin/man/man2html?1+dpkg-architecture">dpkg-architecture</A></B>(1) values.  While this can reduce the
need for <B><A HREF="/cgi-bin/man/man2html?1+dh-exec">dh-exec</A></B>(1) in some cases, it is <B>not</B> a replacement
<B><A HREF="/cgi-bin/man/man2html?1+dh-exec">dh-exec</A></B>(1) in general.  If you need filtering, renaming, etc., the
package will still need <B><A HREF="/cgi-bin/man/man2html?1+dh-exec">dh-exec</A></B>(1).


<P>


Please see ``Substitutions in debhelper config files'' for syntax and
available substitution variables.  To <B>dh_*</B> tool writers, substitution
expansion occurs as a part of the <B>filearray</B> and <B>filedoublearray</B>
functions.
<DT id="186">-<DD>
The <B>dh</B> command sequencer will now skip all hook and override targets for
<B>dh_auto_test</B>, <B>dh_dwz</B> and <B>dh_strip</B> when <B></B><FONT SIZE="-1"><B>DEB_BUILD_OPTIONS</B></FONT><B></B> lists
the relevant <B>nocheck</B> / <B>nostrip</B> options.


<P>


Any package relying on these targets to always be run should instead move
relevant logic out of those targets.  E.g. non-test related packaging code
from <B>override_dh_auto_test</B> would have to be moved to
<B>execute_after_dh_auto_build</B> or <B>execute_before_dh_auto_install</B>.
<DT id="187">-<DD>
The <B>cmake</B> buildsystem now passes
<B>-DCMAKE_SKIP_INSTALL_ALL_DEPENDENCY=ON</B> to <B><A HREF="/cgi-bin/man/man2html?1+cmake">cmake</A></B>(1) to speed up
automatic installation process. If for some reason you need previous
behavior, override the flag:


<P>




<PRE>
    dh_auto_configure -- -DCMAKE_SKIP_INSTALL_ALL_DEPENDENCY=OFF ...

</PRE>


</DL>
</DL>

<DL COMPACT><DT id="188"><DD>
</DL>

</DL>
<A NAME="lbAP">&nbsp;</A>
<H2>REMARQUES</H2>



<A NAME="lbAQ">&nbsp;</A>
<H3>Prise en charge de plusieurs paquets binaires</H3>



Si le paquet source produit plus d'un paquet binaire, les programmes de
debhelper construiront tous les paquets binaires. Si le paquet source doit
construire un paquet dépendant de l'architecture et un paquet indépendant de
l'architecture, ce comportement ne conviendra pas. En effet, il convient de
construire les paquets dépendants de l'architecture dans « binary-arch » de
<I>debian/rules</I>, et les paquets indépendants de l'architecture dans
« binary-indep ».
<P>

Pour résoudre ce problème, et pour un meilleur contrôle sur la construction
des paquets par debhelper, tous les programmes de debhelper acceptent les
options <B>-a</B>, <B>-i</B>, <B>-p</B> et <B>-s</B>. Ces options sont cumulatives. Si
aucune n'est précisée, les programmes de debhelper construisent tous les
paquets énumérés dans le fichier de contrôle, avec les exceptions
ci-dessous.
<P>

Tout d'abord, chaque paquet dont le champ <B>Architecture</B> de
<I>debian/control</I> ne contient pas l'architecture <B></B><FONT SIZE="-1"><B>DEB_HOST_ARCH</B></FONT><B></B> sera exclu
(``Charte Debian,'' section 5.6.8).
<P>

De plus, quelques autres paquets peuvent être exclus suivant le contenu de
la variable d'environnement <B></B><FONT SIZE="-1"><B>DEB_BUILD_PROFILES</B></FONT><B></B> et les champs
<B>Build-Profiles</B> des paragraphes <I>debian/control</I> dans les paquets
binaires, conformément au brouillon de la charte (voir
&lt;<A HREF="https://wiki.debian.org/BuildProfileSpec">https://wiki.debian.org/BuildProfileSpec</A>&gt;).
<P>

<I>Interaction entre les sélections de paquets et les Build-Profiles</I>


<P>

Les profils de construction (« Build-Profiles ») ont un effet sur le choix
des paquets inclus dans les mécanismes de sélection de paquets de
debhelper. Généralement, les sélections partent du principe que tous les
paquets sont activés. Cette section décrit comment les sélections
fonctionnent lorsqu'un paquet est désactivé par un profil de construction
(ou par son absence).
<DL COMPACT>
<DT id="189"><B>-a</B>/<B>--arch</B>, <B>-i</B>/<B>--indep</B> ou aucune option de sélection (un simple appel « dh_X »)<DD>


Le paquet désactivé par le profil est silencieusement exclu de la sélection.


<P>


Veuillez noter que vous recevrez un avertissement si <I>tous</I> les paquets
relatifs à cette sélection sont désactivés. Dans ce cas, il est généralement
d'aucune utilité de construire.
<DT id="190"><B>-N</B> <I>paquet</I> / <B>--no-package</B> <I>paquet</I><DD>


Cette option est acceptée et ne fait rien.
<DT id="191"><B>-p</B> <I>paquet</I> / <B>--package</B> <I>paquet</I><DD>


Cette option est acceptée, mais debhelper n'agira pas sur le paquet.
</DL>
<P>

Veuillez noter que cela n'a pas d'importance que le paquet soit activé ou
désactivé par défaut.
<A NAME="lbAR">&nbsp;</A>
<H3>Génération automatique des scripts Debian d’installation</H3>



Certaines commandes de debhelper produisent automatiquement des lignes de
code de maintenance du paquet. Pour les inclure dans vos propres scripts de
maintenance du paquet, il convient d'ajouter <B>#DEBHELPER#</B> à l'endroit où
les lignes de code générées devront être insérées. <B>#DEBHELPER#</B> sera
remplacé, par les lignes de code générées automatiquement, lors de
l'exécution de <B>dh_installdeb</B>.
<P>

Si un script de maintenance n'existe pas et que debhelper doit y inclure
quelque chose, alors debhelper créera le script de maintenance complètement.
<P>

Toutes les commandes de debhelper qui produisent automatiquement des lignes
de code de cette façon peuvent inhiber cette production grâce à l'option
<B>-n</B> (voir ci-dessus).
<P>

Nota : Les lignes de code insérées seront écrites dans le langage de
l'interpréteur de commandes (shell). De ce fait, il est impossible de les
placer directement dans un script Perl. Pour les insérer dans un script
Perl, voici une solution (s'assurer que <TT>$1</TT>, <TT>$2</TT>, etc., sont bien définis par
la commande set) :
<P>



<PRE>
  my $temp=&quot;set -e\nset -- @ARGV\n&quot; . &lt;&lt; 'EOF';
  #DEBHELPER#
  EOF
  if (system($temp)) {
     my $exit_code = ($? &gt;&gt; 8) &amp; 0xff;
     my $signal = $? &amp; 0x7f;
     if ($exit_code) {
         die(&quot;Le script debhelper a échoué avec le code d'erreur : ${exit_code}&quot;);
     } else {
         die(&quot;Le script debhelper a été tué par le signal : ${signal}&quot;);
     }
  }

</PRE>


<A NAME="lbAS">&nbsp;</A>
<H3>Génération automatique des diverses dépendances.</H3>



Certaines commandes de debhelper peuvent nécessiter des dépendances entre le
paquet construit et d'autres paquets. Par exemple, si
<B><A HREF="/cgi-bin/man/man2html?1+dh_installdebconf">dh_installdebconf</A></B>(1) est employé, le paquet devra dépendre de debconf. Si
<B><A HREF="/cgi-bin/man/man2html?1+dh_installxfonts">dh_installxfonts</A></B>(1) est employé, le paquet deviendra dépendant d'une
version particulière de xutils. Maintenir ces dépendances induites peut être
pénible puisqu'elles découlent de la façon dont debhelper travaille. C'est
pourquoi debhelper offre une solution d'automatisation.
<P>

Toutes les commandes de ce type, outre qu'elles documentent, dans leur page
de manuel, les dépendances qu'elle induisent, généreront automatiquement une
variable de substitution nommée <B>${misc:depends}</B>. Si cette variable est
exploitée dans le dossier <I>debian/control</I>, il sera automatiquement enrichi
des dépendances induites par debhelper.
<P>

Ce processus est entièrement indépendant de <B>${shlibs:Depends}</B> standard,
produite par <B><A HREF="/cgi-bin/man/man2html?1+dh_makeshlibs">dh_makeshlibs</A></B>(1), et de <B>${perl:Depends}</B> produite par
<B><A HREF="/cgi-bin/man/man2html?1+dh_perl">dh_perl</A></B>(1). Il est également possible de choisir de ne pas les utiliser
si les conjectures de debhelper ne correspondent pas à la réalité.
<A NAME="lbAT">&nbsp;</A>
<H3>Répertoires de construction du paquet</H3>



Par défaut, tous les programmes de debhelper supposent que le répertoire
temporaire utilisé pour construire l'arborescence des fichiers d'un paquet
est debian/<I>paquet</I>.
<P>

Parfois, il peut être souhaitable d'utiliser un autre répertoire
temporaire. C'est obtenu grâce à l'attribut <B>-P</B>. Par exemple,
<B>dh_installdocs -Pdebian/tmp</B> utilisera <B>debian/tmp</B> comme répertoire
temporaire. Nota : L'usage de <B>-P</B> implique que les programmes de debhelper
ne construisent qu'un seul paquet à la fois. De ce fait, si le paquet source
génère plusieurs paquets binaires, il faudra employer également le paramètre
<B>-p</B> pour préciser l'unique paquet binaire à construire.
<A NAME="lbAU">&nbsp;</A>
<H3>udebs</H3>



Debhelper prend en charge la construction des udebs. Pour créer un udeb avec
debhelper, il faut ajouter « <B>Package-Type: udeb</B> » aux lignes de paquet
dans <I>debian/control</I>. Debhelper essayera de construire des udebs,
conformément aux règles de l'installateur Debian, en suffixant les fichiers
de paquets générés avec <I>.udeb</I>, en n'installant aucune documentation dans
un udeb, en omettant les scripts <I>preinst</I>, <I>postrm</I>, <I>prerm</I> et
<I>config</I>, etc.
<A NAME="lbAV">&nbsp;</A>
<H2>VARIABLES D'ENVIRONNEMENT</H2>



Les variables d'environnement suivantes peuvent influencer le comportement
de debhelper. Il est important de noter que celles-ci doivent être des
variables existantes pour que cela fonctionne correctement (pas simplement
des variables de <I>Makefile</I>). Pour les définir proprement dans le fichier
<I>debian/rules</I>, assurez vous de les exporter (« <B>export</B> »). Par exemple
« <B>export </B><FONT SIZE="-1"><B>DH_VERBOSE</B></FONT><B></B> ».
<DL COMPACT>
<DT id="192"><B></B><FONT SIZE="-1"><B>DH_VERBOSE</B></FONT><B></B><DD>


Mettre cette variable à <B>1</B> valide le mode verbeux. Debhelper affichera
chaque commande exécutée. Valide aussi les journaux de construction bavards
pour certains systèmes de construction comme autoconf.
<DT id="193"><B></B><FONT SIZE="-1"><B>DH_QUIET</B></FONT><B></B><DD>


Mettre cette variable à <B>1</B> valide le mode silencieux. Debhelper
n'affichera aucune commande appelant le système de construction amont, et dh
n'affichera aucune des sous-commandes appelées. En fonction du système de
construction amont, cela pourra le rendre encore plus silencieux. Cela
facilite la détection des messages importants, mais rend la sortie inutile
en tant que journal de construction. Cette valeur est ignorée si
<B></B><FONT SIZE="-1"><B>DH_VERBOSE</B></FONT><B></B> est aussi positionnée.
<DT id="194"><B></B><FONT SIZE="-1"><B>DH_COMPAT</B></FONT><B></B><DD>


Indique temporairement le niveau de compatibilité avec lequel debhelper doit
fonctionner. Cette valeur supplante toute valeur précisée par Build-Depends
sur debhelper-compat ou dans <I>debian/compat</I>.
<DT id="195"><B></B><FONT SIZE="-1"><B>DH_NO_ACT</B></FONT><B></B><DD>


Mettre cette variable à <B>1</B> pour activer le mode simulation (no-act).
<DT id="196"><B></B><FONT SIZE="-1"><B>DH_OPTIONS</B></FONT><B></B><DD>


All debhelper tools will parse command line arguments listed in this
variable before any command option (as if they had been prepended to the
command line arguments).  Unfortunately, some third-party provided tools may
not support this variable and will ignore these command line arguments.


<P>


En utilisant <B><A HREF="/cgi-bin/man/man2html?1+dh">dh</A></B>(1), des options peuvent être passées à chaque commande
debhelper, ce qui est généralement mieux que d'utiliser <B></B><FONT SIZE="-1"><B>DH_OPTIONS</B></FONT><B></B>.
<DT id="197"><B></B><FONT SIZE="-1"><B>DH_ALWAYS_EXCLUDE</B></FONT><B></B><DD>


Si cette variable possède une valeur, elle sera ajoutée à l'option <B>-X</B> de
toutes les commandes qui admettent cette option. De plus, <B>dh_builddeb</B>
fera un <B>rm -rf</B> pour chaque chose correspondant à la valeur dans l'arbre
de construction de paquet.


<P>


Cela peut être utile pour construire un paquet à partir d'une arborescence
<FONT SIZE="-1">CVS.</FONT> Dans ce cas, le réglage de <B>DH_ALWAYS_EXCLUDE=CVS</B> empêchera les
répertoires <FONT SIZE="-1">CVS</FONT> d'interférer subrepticement dans le paquet en
construction. Ou, si un paquet possède une source compressée,
(maladroitement) présente dans un répertoire <FONT SIZE="-1">CVS,</FONT> il peut être utile
d'exporter <B>DH_ALWAYS_EXCLUDE=CVS</B> dans <I>debian/rules</I>, pour que cette
variable soit prise en compte quel que soit l'endroit où le paquet est
construit.


<P>


Des exclusions multiples peuvent être séparées avec des caractères deux
points, comme dans <I>DH_ALWAYS_EXCLUDE=CVS:.svn</I>.
<DT id="198"><B></B><FONT SIZE="-1"><B>DH_EXTRA_ADDONS</B></FONT><B></B><DD>


Les rajouts à <B>dh</B> indiqués seront exécutés lors de la séquence de
commandes. Cela équivaut à les indiquer avec le drapeau <B>--with</B> dans le
fichier <I>debian/rules</I>. Les rajouts précédés de <B>--without</B> ne seront pas
exécutés, même s'ils sont indiqués dans cette variable d'environnement.


<P>


Cela est prévu pour être utilisé par les dérivées ou les configurations
locales spécifiques qui ont besoin d'un rajout lors de plusieurs
construction, sans avoir à modifier un grand nombre de fichier <I>rules</I>. Il
est préférable d'éviter cette méthode et d'utiliser plutôt les drapeaux
<B>--with</B> dans le fichier <I>rules</I>.
<DT id="199"><B></B><FONT SIZE="-1"><B>DH_COLORS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>DPKG_COLORS</B></FONT><B></B><DD>


These variables can be used to control whether debhelper commands should use
colors in their textual output.  Can be set to ``always'', ``auto'' (the
default), or ``never''.


<P>


Note that <B></B><FONT SIZE="-1"><B>DPKG_COLOR</B></FONT><B></B> also affects a number of dpkg related tools and
debhelper uses it on the assumption that you want the same color setting for
dpkg and debhelper.  In the off-hand chance you want different color setting
for debhelper, you can use <B></B><FONT SIZE="-1"><B>DH_COLORS</B></FONT><B></B> instead or in addition to
<B></B><FONT SIZE="-1"><B>DPKG_COLORS</B></FONT><B></B>.
<DT id="200"><B></B><FONT SIZE="-1"><B>NO_COLOR</B></FONT><B></B><DD>


If no explicit request for color has been given (e.g. <B></B><FONT SIZE="-1"><B>DH_COLORS</B></FONT><B></B> and
<B></B><FONT SIZE="-1"><B>DPKG_COLORS</B></FONT><B></B> are both unset), the presence of this environment variable
cause the default color setting to be ``never''.


<P>


The variable is defined according to &lt;<A HREF="https://no-color.org/">https://no-color.org/</A>&gt;.  In this
project, the environment variables (such as <B></B><FONT SIZE="-1"><B>DH_COLORS</B></FONT><B></B>) are considered an
explicit request for color.
<DT id="201"><B></B><FONT SIZE="-1"><B>CFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>CPPFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>CXXFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>OBJCFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>OBJCXXFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>GCJFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>FFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>FCFLAGS</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>LDFLAGS</B></FONT><B></B><DD>


By default (in any non-deprecated compat level), debhelper will
automatically set these flags by using <B><A HREF="/cgi-bin/man/man2html?1+dpkg-buildflags">dpkg-buildflags</A></B>(1), when they are
unset.  If you need to change the default flags, please use the features
from <B><A HREF="/cgi-bin/man/man2html?1+dpkg-buildflags">dpkg-buildflags</A></B>(1) to do this
(e.g. <B>DEB_BUILD_MAINT_OPTIONS=hardening=all</B> or
<B>DEB_CPPFLAGS_MAINT_APPEND=-DCUSTOM_MACRO=true</B>) rather than setting the
concrete variable directly.
<DT id="202"><B></B><FONT SIZE="-1"><B>HOME</B></FONT><B></B>, <B>XDG_*</B><DD>


In compat 13 and later, these environment variables are reset before
invoking the upstream build system via the <B>dh_auto_*</B> helpers.  The
variables <B></B><FONT SIZE="-1"><B>HOME</B></FONT><B></B> and <B></B><FONT SIZE="-1"><B>XDG_RUNTIME_DIR</B></FONT><B></B> will be set to a writable
directory. The remaining variables will be cleared.


<P>


The directories will be created as empty directories but they will be reused
between calls to <B>dh_auto_*</B>.  Any content will persist until explicitly
deleted or <B>dh_clean</B>.
</DL>
<A NAME="lbAW">&nbsp;</A>
<H2>VOIR AUSSI</H2>



<DL COMPACT>
<DT id="203"><I>/usr/share/doc/debhelper/examples/</I><DD>


Un ensemble d'exemples de fichiers <I>debian/rules</I> qui utilisent debhelper.
<DT id="204">&lt;<A HREF="http://joeyh.name/code/debhelper/">http://joeyh.name/code/debhelper/</A>&gt;<DD>


Le site internet de debhelper.
</DL>
<A NAME="lbAX">&nbsp;</A>
<H2>AUTEUR</H2>



Joey Hess &lt;<A HREF="mailto:joeyh@debian.org">joeyh@debian.org</A>&gt;
<A NAME="lbAY">&nbsp;</A>
<H2>TRADUCTION</H2>



Cette traduction est maintenue à l'aide de l'outil po4a
&lt;URL:<A HREF="http://po4a.alioth.debian.org/">http://po4a.alioth.debian.org/</A>&gt; par l'équipe francophone de traduction
de Debian.
<P>

Veuillez signaler toute erreur de traduction en écrivant à
&lt;<A HREF="mailto:debian-l10n-french@lists.debian.org">debian-l10n-french@lists.debian.org</A>&gt; ou par un rapport de bogue sur le paquet
debhelper.
<P>

Vous pouvez toujours avoir accès à la version anglaise de ce document en
utilisant la commande « man -L C &lt;section&gt; &lt;page_de_man&gt; ».
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="205"><A HREF="#lbAB">NOM</A><DD>
<DT id="206"><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT id="207"><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT id="208"><A HREF="#lbAE">COMMANDES DE DEBHELPER</A><DD>
<DL>
<DT id="209"><A HREF="#lbAF">Commandes obsolètes</A><DD>
<DT id="210"><A HREF="#lbAG">Autres commandes</A><DD>
</DL>
<DT id="211"><A HREF="#lbAH">FICHIERS DE CONFIGURATION DE DEBHELPER</A><DD>
<DL>
<DT id="212"><A HREF="#lbAI">Substitutions in debhelper config files</A><DD>
<DT id="213"><A HREF="#lbAJ">Fichiers de configuration de l'exécutable debhelper.</A><DD>
</DL>
<DT id="214"><A HREF="#lbAK">OPTIONS PARTAGÉES DE DEBHELPER</A><DD>
<DT id="215"><A HREF="#lbAL">OPTIONS COURANTES DE DEBHELPER</A><DD>
<DT id="216"><A HREF="#lbAM">OPTIONS DU PROCESSUS DE CONSTRUCTION</A><DD>
<DT id="217"><A HREF="#lbAN">NIVEAUX DE COMPATIBILITÉ</A><DD>
<DL>
<DT id="218"><A HREF="#lbAO">Niveaux de compatibilité pris en charge</A><DD>
</DL>
<DT id="219"><A HREF="#lbAP">REMARQUES</A><DD>
<DL>
<DT id="220"><A HREF="#lbAQ">Prise en charge de plusieurs paquets binaires</A><DD>
<DT id="221"><A HREF="#lbAR">Génération automatique des scripts Debian d’installation</A><DD>
<DT id="222"><A HREF="#lbAS">Génération automatique des diverses dépendances.</A><DD>
<DT id="223"><A HREF="#lbAT">Répertoires de construction du paquet</A><DD>
<DT id="224"><A HREF="#lbAU">udebs</A><DD>
</DL>
<DT id="225"><A HREF="#lbAV">VARIABLES D'ENVIRONNEMENT</A><DD>
<DT id="226"><A HREF="#lbAW">VOIR AUSSI</A><DD>
<DT id="227"><A HREF="#lbAX">AUTEUR</A><DD>
<DT id="228"><A HREF="#lbAY">TRADUCTION</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:05:02 GMT, March 31, 2021
</BODY>
</HTML>

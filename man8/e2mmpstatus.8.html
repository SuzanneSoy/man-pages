
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of E2MMPSTATUS</TITLE>
</HEAD><BODY>
<H1>E2MMPSTATUS</H1>
Section: Maintenance Commands (8)<BR>Updated: January 2020<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

e2mmpstatus - Check MMP status of an ext4 filesystem
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>e2mmpstatus</B> [<B>-i</B>]

&lt;<I>filesystem</I>&gt;

<A NAME="lbAD">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT id="1"><B>-i</B>

<DD>
prints out the MMP information rather than check it.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>e2mmpstatus</B>

is used to check Multiple-Mount Protection (MMP) status of an ext4
filesystem with the
<B>mmp</B>

feature enabled.  The specified
<I>filesystem</I>

can be a device name (e.g.
<I>/dev/hdc1</I>, <I>/dev/sdb2</I>),

or an ext4 filesystem label or UUID, for example
<B>UUID=8868abf6-88c5-4a83-98b8-bfc24057f7bd</B>

or
<B>LABEL=root</B>.

By default, the
<B>e2mmpstatus</B>

program checks whether it is safe to mount the filesystem without taking
the risk of mounting it more than once.
<P>

MMP (multiple-mount protection) is a feature that adds protection against
the filesystem being modified simultaneously by more than one node.
It is NOT safe to mount a filesystem when one of the following conditions
is true:
<BR>

<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>1. e2fsck is running on the filesystem.<BR>
<BR>

<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>2. the filesystem is in use by another node.<BR>
<BR>

<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>3. The MMP block is corrupted or cannot be read for some reason.<BR>
<BR>

The
<B>e2mmpstatus</B>

program might wait for some time to see whether the MMP block is being
updated by any node during this period.  The time taken depends on how
frequently the MMP block is being written by the other node.
<A NAME="lbAF">&nbsp;</A>
<H2>EXIT CODE</H2>

The exit code returned by
<B>e2mmpstatus</B>

is 0 when it is safe to mount the filesystem, 1 when the MMP block shows
the filesystem is in use on another node and it is NOT safe to mount
the filesystem, and 2 if some other failure occurred that prevents the
check from properly detecting the current MMP status.
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/cgi-bin/man/man2html?8+dumpe2fs">dumpe2fs</A></B>(8),

<B><A HREF="/cgi-bin/man/man2html?8+e2fsck">e2fsck</A></B>(8),

<B><A HREF="/cgi-bin/man/man2html?5+fstab">fstab</A></B>(5),

<B><A HREF="/cgi-bin/man/man2html?8+fsck">fsck</A></B>(8),

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="2"><A HREF="#lbAB">NAME</A><DD>
<DT id="3"><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT id="4"><A HREF="#lbAD">OPTIONS</A><DD>
<DT id="5"><A HREF="#lbAE">DESCRIPTION</A><DD>
<DT id="6"><A HREF="#lbAF">EXIT CODE</A><DD>
<DT id="7"><A HREF="#lbAG">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:06:12 GMT, March 31, 2021
</BODY>
</HTML>

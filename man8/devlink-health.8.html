
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of DEVLINK-HEALTH</TITLE>
</HEAD><BODY>
<H1>DEVLINK-HEALTH</H1>
Section: Linux (8)<BR>Updated: 20 Feb 2019<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

devlink-health - devlink health reporting and recovery
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<P>


<BR>

<B>devlink</B>

[ <I>OPTIONS</I> ]

<B>health</B>

 { <I>COMMAND</I> | 

<B>help</B> }

<P>
<P>
<BR>

<I>OPTIONS</I> := { 

<B>-V</B>[<I>ersion</I>] }
<P>
<BR>

<B>devlink health show</B>

[ <I>DEV</I>

<B>reporter</B>

REPORTER<I> ] </I>

<P>
<BR>

<B>devlink health recover</B>

<I>DEV</I>

<B>reporter</B>

<I>REPORTER</I>

<P>
<BR>

<B>devlink health diagnose</B>

<I>DEV</I>

<B>reporter</B>

<I>REPORTER</I>

<P>
<BR>

<B>devlink health dump show</B>

<I>DEV</I>

<B>reporter</B>

<I>REPORTER</I>

<P>
<BR>

<B>devlink health dump clear</B>

<I>DEV</I>

<B>reporter</B>

<I>REPORTER</I>

<P>
<BR>

<B>devlink health set</B>

<I>DEV</I>

<B>reporter</B>

<I>REPORTER</I>

 { 

<B>grace_period | auto_recover</B>

 } { 

<I>msec</I>

|

<I>boolean</I>

 } 

<BR>

<B>devlink health help</B>

<P>
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="lbAE">&nbsp;</A>
<H3>devlink health show - Show status and configuration on all supported reporters on all devlink devices.</H3>

<P>
<P>

<I>DEV</I>

- specifies the devlink device.
<P>
<P>

<I>REPORTER</I>

- specifies the reporter's name registered on the devlink device.
<P>
<A NAME="lbAF">&nbsp;</A>
<H3>devlink health recover - Initiate a recovery operation on a reporter.</H3>

This action performs a recovery and increases the recoveries counter on success.
<P>
<P>

<I>DEV</I>

- specifies the devlink device.
<P>
<P>

<I>REPORTER</I>

- specifies the reporter's name registered on the devlink device.
<P>
<A NAME="lbAG">&nbsp;</A>
<H3>devlink health diagnose - Retrieve diagnostics data on a reporter.</H3>

<P>
<P>

<I>DEV</I>

- specifies the devlink device.
<P>
<P>

<I>REPORTER</I>

- specifies the reporter's name registered on the devlink device.
<P>
<A NAME="lbAH">&nbsp;</A>
<H3>devlink health dump show - Display the last saved dump.</H3>

<P>

<P>

devlink health saves a single dump per reporter. If an dump is
<P>

not already stored by the Devlink, this command will generate a new
<P>

dump. The dump can be generated either automatically when a
<P>

reporter reports on an error or manually at the user's request.

<P>
<P>

<I>DEV</I>

- specifies the devlink device.
<P>
<P>

<I>REPORTER</I>

- specifies the reporter's name registered on the devlink device.
<P>
<A NAME="lbAI">&nbsp;</A>
<H3>devlink health dump clear - Delete the saved dump.</H3>

Deleting the saved dump enables a generation of a new dump on

<P>

the next &quot;devlink health dump show&quot; command.

<P>
<P>

<I>DEV</I>

- specifies the devlink device.
<P>
<P>

<I>REPORTER</I>

- specifies the reporter's name registered on the devlink device.
<P>
<A NAME="lbAJ">&nbsp;</A>
<H3>devlink health set - Enable the user to configure:</H3>


1) grace_period [msec] - Time interval between consecutive auto recoveries.
<P>

2) auto_recover [true/false] - Indicates whether the devlink should execute automatic recover on error.
<P>

Please note that this command is not supported on a reporter which
doesn't support a recovery method.

<P>
<P>

<I>DEV</I>

- specifies the devlink device.
<P>
<P>

<I>REPORTER</I>

- specifies the reporter's name registered on the devlink device.
<P>
<A NAME="lbAK">&nbsp;</A>
<H2>EXAMPLES</H2>

<P>

devlink health show
<DL COMPACT><DT id="1"><DD>
List status and configuration of available reporters on devices.
</DL>

<P>

devlink health recover pci/0000:00:09.0 reporter tx
<DL COMPACT><DT id="2"><DD>
Initiate recovery on tx reporter registered on pci/0000:00:09.0.
</DL>

<P>

devlink health diagnose pci/0000:00:09.0 reporter tx
<DL COMPACT><DT id="3"><DD>
List diagnostics data on the specified device and reporter.
</DL>

<P>

devlink health dump show pci/0000:00:09.0 reporter tx
<DL COMPACT><DT id="4"><DD>
Display the last saved dump on the specified device and reporter.
</DL>

<P>

devlink health dump clear pci/0000:00:09.0 reporter tx
<DL COMPACT><DT id="5"><DD>
Delete saved dump on the specified device and reporter.
</DL>

<P>

devlink health set pci/0000:00:09.0 reporter tx grace_period 3500
<DL COMPACT><DT id="6"><DD>
Set time interval between auto recoveries to minimum of 3500 msec on
the specified device and reporter.
</DL>

<P>

devlink health set pci/0000:00:09.0 reporter tx auto_recover false
<DL COMPACT><DT id="7"><DD>
Turn off auto recovery on the specified device and reporter.
</DL>

<A NAME="lbAL">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/cgi-bin/man/man2html?8+devlink">devlink</A></B>(8),

<B><A HREF="/cgi-bin/man/man2html?8+devlink-dev">devlink-dev</A></B>(8),

<B><A HREF="/cgi-bin/man/man2html?8+devlink-port">devlink-port</A></B>(8),

<B><A HREF="/cgi-bin/man/man2html?8+devlink-param">devlink-param</A></B>(8),

<B><A HREF="/cgi-bin/man/man2html?8+devlink-region">devlink-region</A></B>(8),

<BR>

<P>
<A NAME="lbAM">&nbsp;</A>
<H2>AUTHOR</H2>

Aya Levin &lt;<A HREF="mailto:ayal@mellanox.com">ayal@mellanox.com</A>&gt;
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="8"><A HREF="#lbAB">NAME</A><DD>
<DT id="9"><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT id="10"><A HREF="#lbAD">DESCRIPTION</A><DD>
<DL>
<DT id="11"><A HREF="#lbAE">devlink health show - Show status and configuration on all supported reporters on all devlink devices.</A><DD>
<DT id="12"><A HREF="#lbAF">devlink health recover - Initiate a recovery operation on a reporter.</A><DD>
<DT id="13"><A HREF="#lbAG">devlink health diagnose - Retrieve diagnostics data on a reporter.</A><DD>
<DT id="14"><A HREF="#lbAH">devlink health dump show - Display the last saved dump.</A><DD>
<DT id="15"><A HREF="#lbAI">devlink health dump clear - Delete the saved dump.</A><DD>
<DT id="16"><A HREF="#lbAJ">devlink health set - Enable the user to configure:</A><DD>
</DL>
<DT id="17"><A HREF="#lbAK">EXAMPLES</A><DD>
<DT id="18"><A HREF="#lbAL">SEE ALSO</A><DD>
<DT id="19"><A HREF="#lbAM">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:06:11 GMT, March 31, 2021
</BODY>
</HTML>

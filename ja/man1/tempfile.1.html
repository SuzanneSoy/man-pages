
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of TEMPFILE</TITLE>
</HEAD><BODY>
<H1>TEMPFILE</H1>
Section: User Commands  (1)<BR>Updated: 27 Jun 2012<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

tempfile - 安全な一時ファイルの作成
<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>tempfile</B> [-d DIR] [-p STRING] [-s STRING] [-m MODE] [-n FILE]
[--directory=DIR] [--prefix=STRING] [--suffix=STRING] [--mode=MODE]
[--name=FILE] [--help] [--version]
<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>

<P>

<B>tempfile</B> creates a temporary file in a safe manner.  It uses
<B><A HREF="/cgi-bin/man/man2html?3+mkstemps">mkstemps</A></B>(3)  to choose the name and opens it with O_RDWR | O_CREAT |
O_EXCL.  The filename is printed on standard output.
<P>

The directory in which to create the file might be searched for in this
order:
<DL COMPACT>
<DT id="1">a)<DD>
環境変数 <B>TMPDIR</B> が存在し、適切なディレクトリ名が設定されていれば、これを使用します。
<DT id="2">b)<DD>
そうでない場合、<I>--directory</I> 引数が指定されていて適切であれば、これを使用します。
<DT id="3">c)<DD>
そうでない場合、<I>P_tmpdir</I> (<I>&lt;<A HREF="file:///usr/include/stdio.h">stdio.h</A>&gt;</I> で定義) が適切であれば、これを使用します。
<DT id="4">d)<DD>
最後に、実装で定義したディレクトリ <I>(/tmp)</I> を使用します。
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>オプション</H2>

<DL COMPACT>
<DT id="5"><B>-d, --directory </B><I>DIR</I><DD>
ファイルを DIR に配置します。
<DT id="6"><B>-m, --mode </B><I>MODE</I><DD>
ファイルのモードを 0600 に代えて MODE で開きます。
<DT id="7"><B>-n, --name </B><I>FILE</I><DD>
ファイル名として <B><A HREF="/cgi-bin/man/man2html?3+tempnam">tempnam</A></B>(3) に代えて FILE を使用します。このオプションを与えると、-d, -p, -s
の各オプションを無視します。
<DT id="8"><B>-p, --prefix </B><I>STRING</I><DD>
STRING の 5 文字までを名前の生成に使用します。
<DT id="9"><B>-s, --suffix </B><I>STRING</I><DD>
STRING を末尾にするファイルを生成します。
<DT id="10"><B>--help</B><DD>
使用方法を標準出力に表示し、正常終了します。
<DT id="11"><B>--version</B><DD>
バージョン情報を標準出力に表示し、正常終了します。
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>戻り値</H2>

終了ステータスが 0 は一時ファイルが正常に作成できたことを意味します。その他の終了ステータスはエラーです。
<A NAME="lbAG">&nbsp;</A>
<H2>バグ</H2>

NFS パーティションでファイルを作成する際、排他作成は保証されません。tempfile は一時ディレクトリを作成できません。tempfile
は非推奨です。代わりに <A HREF="/cgi-bin/man/man2html?1+mktemp">mktemp</A>(1) を使用してください。
<A NAME="lbAH">&nbsp;</A>
<H2>例</H2>

<P>
<DL COMPACT><DT id="12"><DD>
<PRE>
#!/bin/sh
#[...]
t=$(tempfile) || exit
trap &quot;rm -f -- '$t'&quot; EXIT
#[...]
rm -f -- &quot;$t&quot;
trap - EXIT
exit
</PRE>

</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="/cgi-bin/man/man2html?3+tempnam">tempnam</A></B>(3), <B><A HREF="/cgi-bin/man/man2html?1+mktemp">mktemp</A></B>(1)
<A NAME="lbAJ">&nbsp;</A>
<H2>翻訳</H2>

倉澤 望 &lt;<A HREF="mailto:nabetaro@debian.or.jp">nabetaro@debian.or.jp</A>&gt;, 2012
<BR>

Debian JP Documentation ML &lt;<A HREF="mailto:debian-doc@debian.or.jp">debian-doc@debian.or.jp</A>&gt;
<P>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="13"><A HREF="#lbAB">名前</A><DD>
<DT id="14"><A HREF="#lbAC">書式</A><DD>
<DT id="15"><A HREF="#lbAD">説明</A><DD>
<DT id="16"><A HREF="#lbAE">オプション</A><DD>
<DT id="17"><A HREF="#lbAF">戻り値</A><DD>
<DT id="18"><A HREF="#lbAG">バグ</A><DD>
<DT id="19"><A HREF="#lbAH">例</A><DD>
<DT id="20"><A HREF="#lbAI">関連項目</A><DD>
<DT id="21"><A HREF="#lbAJ">翻訳</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:05:05 GMT, March 31, 2021
</BODY>
</HTML>

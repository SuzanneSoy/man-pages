
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of DEBCONF-APT-PROGRESS.RU.1</TITLE>
</HEAD><BODY>
<H1>DEBCONF-APT-PROGRESS.RU.1</H1>
Section: Debconf (1)<BR>Updated: 2019-08-03<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>НАЗВАНИЕ</H2>



debconf-apt-progress - устанавливает пакеты используя debconf для показа
индикатора выполнения
<A NAME="lbAC">&nbsp;</A>
<H2>СИНТАКСИС</H2>





<PRE>
 debconf-apt-progress [--] команда [аргументы ...]
 debconf-apt-progress --config
 debconf-apt-progress --start
 debconf-apt-progress --from граница --to граница [--] команда [аргументы ...]
 debconf-apt-progress --stop

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>ОПИСАНИЕ</H2>



<B>debconf-apt-progress</B> устанавливает пакеты, используя debconf с показом
индикатора выполнения. Указанная <I>команда</I> должна быть любой интерфейсной
программой к apt, работающей в режиме командной строки; а именно, она должны
уметь посылать информацию о ходе выполнения в файловый дескриптор, заданный
параметром настройки <TT>&quot;APT::Status-Fd&quot;</TT>, и должна держать открытыми файловые
дескрипторы, назначенные в параметре настройки <TT>&quot;APT::Keep-Fds&quot;</TT> при вызове
debconf (явно или неявно), так как эти файловые дескрипторы будут
использоваться для работы с debconf.
<P>

В передаваемых аргументах команды обычно должен указываться параметр <B>-y</B>
(для <B>apt-get</B> или <B>aptitude</B>) или подобный ему, для того чтобы интерфейс
к apt не предлагал вводить данные. <B>debconf-apt-progress</B> не может сделать
это самостоятельно, так как нужный аргумент может различаться у разных
интерфейсов apt.
<P>

Параметры <B>--start</B>, <B>--stop</B>, <B>--from</B> и <B>--to</B> могут использоваться
для создания многосегментного индикатора выполнения для разных стадий
установки при условии, что запускающая сторона это debconf
confmodule. Также, если требуется, запускающая сторона может самостоятельно
взаимодействовать с индикатором выполнения через протокол debconf.
<P>

При запуске debconf блокирует доступ к своей базе данных config, что к
сожалению не даёт иметь один экземпляр debconf отображающий индикатор
выполнения и другой, задающий вопросы из устанавливаемых пакетов. Если вы
используете многосегментный индикатор, то для того чтобы обойти это
ограничение требуется обрабатывать результат работы параметра <B>--config</B>
перед запуском интерфейса debconf. Подробней смотрите в разделе ПРИМЕРЫ
далее.
<A NAME="lbAE">&nbsp;</A>
<H2>ПАРАМЕТРЫ</H2>



<DL COMPACT>
<DT id="1"><B>--config</B><DD>


Вывести переменные окружения, необходимые для запуска индикатора выполнения
интерфейса.
<DT id="2"><B>--start</B><DD>


Запустить индикатор выполнения, по умолчанию отсчитывающий от 0 до
100. Чтобы указать другие границы используйте <B>--from</B> и <B>--to</B>.
<DT id="3"><B>--from</B> <I>граница</I><DD>


Если используется вместе со <B>--start</B>, то индикатор выполнения начинает
отсчёт с <I>границы</I>, а не с 0.


<P>


Иначе, при установке пакетов индикатор выполнения начинается со значения
«границы». Должен использоваться с параметром <B>--to</B>.
<DT id="4"><B>--to</B> <I>граница</I><DD>


Если используется вместе со <B>--start</B>, то индикатор выполнения заканчивает
отсчёт по достижению <I>границы</I>, а не на 100.


<P>


Иначе, при установке пакетов индикатор выполнения заканчивается на значении
«границы». Должен использоваться с параметром <B>--from</B>.
<DT id="5"><B>--stop</B><DD>


Остановить запущенный индикатор выполнения.
<DT id="6"><B>--no-progress</B><DD>


Не запускать, останавливать или изменять индикатор выполнения. Сообщения о
ходе выполнения от apt, события смены носителей и вопросы debconf всё равно
будут проходить через debconf.
<DT id="7"><B>--dlwaypoint</B> <I>процент</I><DD>


Задать, какой процент заполнения индикатора выполнения отвести на скачивание
пакетов. Оставшаяся часть будет использована на показ установки пакетов. По
умолчанию используется 15% на показ скачивания и оставшиеся 85% на
установку.
<DT id="8"><B>--logfile</B> <I>файл</I><DD>


Направить результат работы apt в указанный файл.
<DT id="9"><B>--logstderr</B><DD>


Послать нормальные результаты работы apt в поток ошибок stderr. Если вы не
укажите <B>--logfile</B> или <B>--logstderr</B>, то нормальные результаты работы apt
пропадут.
<DT id="10"><B>--</B><DD>


Завершает параметры. Так как обычно нужно указать по крайней мере параметр
<B>-y</B> для запускаемой команды, требуется использовать <B>--</B>, чтобы отделить
эти параметры от параметров <B>debconf-apt-progress</B>.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>ПРИМЕРЫ</H2>



Установить рабочий стол <FONT SIZE="-1">GNOME</FONT> и среду разработки для X window system с
выводом индикатора выполнения:
<P>



<PRE>
 debconf-apt-progress -- aptitude -y install gnome x-window-system-dev

</PRE>


<P>

Установить рабочие столы <FONT SIZE="-1">GNOME, KDE</FONT> и <FONT SIZE="-1">XFCE</FONT> с выводом индикатора выполнения,
отдав по 45% индикатора выполнения <FONT SIZE="-1">GNOME</FONT> и <FONT SIZE="-1">KDE,</FONT> а оставшиеся 10% под <FONT SIZE="-1">XFCE:</FONT>
<P>



<PRE>
 #! /bin/sh
 set -e
 case $1 in
   '')
     eval &quot;$(debconf-apt-progress --config)&quot;
     &quot;$0&quot; debconf
     ;;
   debconf)
     . /usr/share/debconf/confmodule
     debconf-apt-progress --start
     debconf-apt-progress --from 0 --to 45 -- apt-get -y install gnome
     debconf-apt-progress --from 45 --to 90 -- apt-get -y install kde
     debconf-apt-progress --from 90 --to 100 -- apt-get -y install xfce4
     debconf-apt-progress --stop
     ;;
 esac

</PRE>


<A NAME="lbAG">&nbsp;</A>
<H2>КОД ВОЗВРАТА</H2>



Код, возвращаемый при возврате указанной команды, если пользователь не нажал
клавишу отмены на индикаторе выполнения. Если кнопка отмены была нажата, то
возвращается значение 30. Для избежания неоднозначности, если команда
возвращает 30, то будет возвращаться значение 3.
<A NAME="lbAH">&nbsp;</A>
<H2>АВТОРЫ</H2>



Colin Watson &lt;<A HREF="mailto:cjwatson@debian.org">cjwatson@debian.org</A>&gt;
<P>

Joey Hess &lt;<A HREF="mailto:joeyh@debian.org">joeyh@debian.org</A>&gt;
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="11"><A HREF="#lbAB">НАЗВАНИЕ</A><DD>
<DT id="12"><A HREF="#lbAC">СИНТАКСИС</A><DD>
<DT id="13"><A HREF="#lbAD">ОПИСАНИЕ</A><DD>
<DT id="14"><A HREF="#lbAE">ПАРАМЕТРЫ</A><DD>
<DT id="15"><A HREF="#lbAF">ПРИМЕРЫ</A><DD>
<DT id="16"><A HREF="#lbAG">КОД ВОЗВРАТА</A><DD>
<DT id="17"><A HREF="#lbAH">АВТОРЫ</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:06:22 GMT, March 31, 2021
</BODY>
</HTML>

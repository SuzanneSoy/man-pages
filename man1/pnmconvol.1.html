
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of pnmconvol</TITLE>
</HEAD><BODY>
<H1>pnmconvol</H1>
Section: User Commands  (1)<BR>Updated: 26 November 1994<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="ixAAB"></A>
<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

pnmconvol - general MxN convolution on a portable anymap
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>pnmconvol</B>

<I>convolutionfile</I>

[<I>pnmfile</I>]

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

Reads two portable anymaps as input.
Convolves the second using the first,
and writes a portable anymap as output.
<A NAME="ixAAC"></A>
<P>

Convolution means replacing each pixel with a weighted average of the
nearby pixels.  The weights and the area to average are determined by
the convolution matrix.
The unsigned numbers in the convolution file are offset by -maxval/2 to
make signed numbers, and then normalized, so the actual values in the
convolution file are only relative.
<P>

Here is a sample convolution file;
it does a simple average of the nine immediate neighbors, resulting
in a smoothed image:
<PRE>
    P2
    3 3
    18
    10 10 10
    10 10 10
    10 10 10
</PRE>

<P>

To see how this works, do the above-mentioned offset: 10 - 18/2 gives 1.
The possible range of values is from 0 to 18, and after the offset
that's -9 to 9.  The normalization step makes the range -1 to 1, and
the values get scaled correspondingly so they become 1/9 - exactly what
you want.
The equivalent matrix for 5x5 smoothing would have maxval 50 and be
filled with 26.
<P>

The convolution file will usually be a graymap,
so that the same convolution gets applied to each color component.
However, if you want to use a pixmap and do a different convolution to
different colors, you can certainly do that.
<P>

At the edges of the convolved image, where the convolution matrix would
extend over the edge of the image, 
<B>pnmconvol</B>

just copies the input pixels directly to the output.
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/cgi-bin/man/man2html?1+pnmsmooth">pnmsmooth</A></B>(1),

<B><A HREF="/cgi-bin/man/man2html?5+pnm">pnm</A></B>(5)

<P>
<A NAME="lbAF">&nbsp;</A>
<H2>AUTHORS</H2>

Copyright (C) 1989, 1991 by Jef Poskanzer.
<BR>

Modified 26 November 1994 by Mike Burns, <A HREF="mailto:burns@chem.psu.edu">burns@chem.psu.edu</A>






<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT id="1"><A HREF="#lbAB">NAME</A><DD>
<DT id="2"><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT id="3"><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT id="4"><A HREF="#lbAE">SEE ALSO</A><DD>
<DT id="5"><A HREF="#lbAF">AUTHORS</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 00:05:24 GMT, March 31, 2021
</BODY>
</HTML>
